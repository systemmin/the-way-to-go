<!doctype html>
<html lang="zh-cn">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <meta name="generator" content="VuePress 2.0.0-rc.19" />
    <style>
      :root {
        --vp-c-bg: #fff;
      }

      [data-theme='dark'] {
        --vp-c-bg: #1b1b1f;
      }

      html,
      body {
        background-color: var(--vp-c-bg);
      }
    </style>
    <script>
      const userMode = localStorage.getItem('vuepress-color-scheme')
      const systemDarkMode =
        'matchMedia' in window
          ? window.matchMedia('(prefers-color-scheme: dark)').matches
          : false

      if (userMode === 'light') {
        document.documentElement.dataset.theme = 'light'
      } else if (userMode === 'dark' || systemDarkMode) {
        document.documentElement.dataset.theme = 'dark'
      }
    </script>
    <title>嵌入 | Go 入门指南 </title><meta name="description" content="The Way to Go">
    <link rel="preload" href="/assets/style-PoWje89h.css" as="style"><link rel="stylesheet" href="/assets/style-PoWje89h.css">
    <link rel="modulepreload" href="/assets/app-DtITwm2S.js"><link rel="modulepreload" href="/assets/嵌入.html-D-0DUkFJ.js">
    <link rel="prefetch" href="/assets/preface.html-6DZH9Ubj.js" as="script"><link rel="prefetch" href="/assets/index.html-Ck8S5GDx.js" as="script"><link rel="prefetch" href="/assets/介绍.html-Cpc4HhS7.js" as="script"><link rel="prefetch" href="/assets/参数详情.html-7jPPiiO-.js" as="script"><link rel="prefetch" href="/assets/图像.html-CuiCV0kQ.js" as="script"><link rel="prefetch" href="/assets/审核.html-CNJ5oBgL.js" as="script"><link rel="prefetch" href="/assets/嵌入.html-Dm-ZcblN.js" as="script"><link rel="prefetch" href="/assets/引擎.html-C2kiFg-p.js" as="script"><link rel="prefetch" href="/assets/微调.html-DTcL4LME.js" as="script"><link rel="prefetch" href="/assets/文件.html-B29chMrc.js" as="script"><link rel="prefetch" href="/assets/模型.html-CrDaD65q.js" as="script"><link rel="prefetch" href="/assets/编辑.html-BIzO3lYW.js" as="script"><link rel="prefetch" href="/assets/补全.html-DTG8jPu_.js" as="script"><link rel="prefetch" href="/assets/01.1.html-Z7EtjgVs.js" as="script"><link rel="prefetch" href="/assets/01.2.html-BwUS2dml.js" as="script"><link rel="prefetch" href="/assets/02.1.html-DnOKmj_n.js" as="script"><link rel="prefetch" href="/assets/02.2.html-CnA2ZrR6.js" as="script"><link rel="prefetch" href="/assets/02.3.html-CoFfj52b.js" as="script"><link rel="prefetch" href="/assets/02.4.html-DAz_ml-6.js" as="script"><link rel="prefetch" href="/assets/02.5.html-DmYKmXg1.js" as="script"><link rel="prefetch" href="/assets/02.6.html-DGi6Udpr.js" as="script"><link rel="prefetch" href="/assets/02.7.html-DvXtNgwQ.js" as="script"><link rel="prefetch" href="/assets/02.8.html-LfWDv4MS.js" as="script"><link rel="prefetch" href="/assets/03.0.html-Brqlbw8D.js" as="script"><link rel="prefetch" href="/assets/03.1.html-C5oriWik.js" as="script"><link rel="prefetch" href="/assets/03.2.html-C42QINy-.js" as="script"><link rel="prefetch" href="/assets/03.3.html-OpHmP4_E.js" as="script"><link rel="prefetch" href="/assets/03.4.html-aFAI61qP.js" as="script"><link rel="prefetch" href="/assets/03.5.html-Bo_f3Dfr.js" as="script"><link rel="prefetch" href="/assets/03.6.html-B7IBUoJs.js" as="script"><link rel="prefetch" href="/assets/03.7.html-BZiieTGR.js" as="script"><link rel="prefetch" href="/assets/03.8.html-D47bQyKy.js" as="script"><link rel="prefetch" href="/assets/03.9.html-Cf7XBq53.js" as="script"><link rel="prefetch" href="/assets/04.1.html-CNJSY0aV.js" as="script"><link rel="prefetch" href="/assets/04.2.html-cbGABghB.js" as="script"><link rel="prefetch" href="/assets/04.3.html-DXSHS8OT.js" as="script"><link rel="prefetch" href="/assets/04.4.html-4CBNpzSp.js" as="script"><link rel="prefetch" href="/assets/04.5.html-PPJYnsQq.js" as="script"><link rel="prefetch" href="/assets/04.6.html-DGmv1gR6.js" as="script"><link rel="prefetch" href="/assets/04.7.html-DhSmhFJM.js" as="script"><link rel="prefetch" href="/assets/04.8.html-CjawH_DY.js" as="script"><link rel="prefetch" href="/assets/04.9.html-qM_qrQS7.js" as="script"><link rel="prefetch" href="/assets/05.0.html-BhrgSVnv.js" as="script"><link rel="prefetch" href="/assets/05.1.html-DlqruRIh.js" as="script"><link rel="prefetch" href="/assets/05.2.html-CGcsXjWq.js" as="script"><link rel="prefetch" href="/assets/05.3.html-C4aXLyaR.js" as="script"><link rel="prefetch" href="/assets/05.4.html-Begn-oRO.js" as="script"><link rel="prefetch" href="/assets/05.5.html-DgACCQDR.js" as="script"><link rel="prefetch" href="/assets/05.6.html-zrm9lfOP.js" as="script"><link rel="prefetch" href="/assets/06.0.html-Cq0Q4zjI.js" as="script"><link rel="prefetch" href="/assets/06.1.html-CwG3jZMg.js" as="script"><link rel="prefetch" href="/assets/06.10.html-NAZ4iIbE.js" as="script"><link rel="prefetch" href="/assets/06.11.html-DyPB_V4f.js" as="script"><link rel="prefetch" href="/assets/06.12.html-Che8zprd.js" as="script"><link rel="prefetch" href="/assets/06.2.html-DjwDsn8t.js" as="script"><link rel="prefetch" href="/assets/06.3.html-Tt2q3aID.js" as="script"><link rel="prefetch" href="/assets/06.4.html-Cn_c8Aw_.js" as="script"><link rel="prefetch" href="/assets/06.5.html-B2O1T7XP.js" as="script"><link rel="prefetch" href="/assets/06.6.html-Xbsxp1rt.js" as="script"><link rel="prefetch" href="/assets/06.7.html-BRlGcWj-.js" as="script"><link rel="prefetch" href="/assets/06.8.html-CH2taiAQ.js" as="script"><link rel="prefetch" href="/assets/06.9.html-CU4R_era.js" as="script"><link rel="prefetch" href="/assets/07.0.html-C-_7USg4.js" as="script"><link rel="prefetch" href="/assets/07.1.html-D0BpTwwY.js" as="script"><link rel="prefetch" href="/assets/07.2.html-C8lUrkIP.js" as="script"><link rel="prefetch" href="/assets/07.3.html-B1_IRZfJ.js" as="script"><link rel="prefetch" href="/assets/07.4.html-AsDoIa-O.js" as="script"><link rel="prefetch" href="/assets/07.5.html-j4dDJSHq.js" as="script"><link rel="prefetch" href="/assets/07.6.html-B5Jb-JAa.js" as="script"><link rel="prefetch" href="/assets/08.0.html-Z4KWQe4B.js" as="script"><link rel="prefetch" href="/assets/08.1.html-DuSqll6N.js" as="script"><link rel="prefetch" href="/assets/08.2.html-BOoIx8_8.js" as="script"><link rel="prefetch" href="/assets/08.3.html-DGNSIGhe.js" as="script"><link rel="prefetch" href="/assets/08.4.html-sZLPjRoc.js" as="script"><link rel="prefetch" href="/assets/08.5.html-Cg1fn4KQ.js" as="script"><link rel="prefetch" href="/assets/08.6.html-C5s5pV7e.js" as="script"><link rel="prefetch" href="/assets/09.0.html-CDAHZh08.js" as="script"><link rel="prefetch" href="/assets/09.1.html-B86Zb4ds.js" as="script"><link rel="prefetch" href="/assets/09.10.html-DqwOV0e7.js" as="script"><link rel="prefetch" href="/assets/09.11.html-C6tNGK9S.js" as="script"><link rel="prefetch" href="/assets/09.2.html-xe8QrE6h.js" as="script"><link rel="prefetch" href="/assets/09.3.html-CstTfhC4.js" as="script"><link rel="prefetch" href="/assets/09.4.html-BraVc6VC.js" as="script"><link rel="prefetch" href="/assets/09.5.html-CFQyzd6x.js" as="script"><link rel="prefetch" href="/assets/09.6.html-BJdkFgKO.js" as="script"><link rel="prefetch" href="/assets/09.7.html-Ch6xJUNQ.js" as="script"><link rel="prefetch" href="/assets/09.8.html-CTy-_9Sp.js" as="script"><link rel="prefetch" href="/assets/09.9.html-BsOj6Y3D.js" as="script"><link rel="prefetch" href="/assets/10.0.html-BJ3HaT6e.js" as="script"><link rel="prefetch" href="/assets/10.1.html-D8BS7BvM.js" as="script"><link rel="prefetch" href="/assets/10.2.html-BWsGTQyI.js" as="script"><link rel="prefetch" href="/assets/10.3.html-BhdBntye.js" as="script"><link rel="prefetch" href="/assets/10.4.html-B4v_wLqb.js" as="script"><link rel="prefetch" href="/assets/10.5.html-D_TpCHYU.js" as="script"><link rel="prefetch" href="/assets/10.6.html-5q-HRLQu.js" as="script"><link rel="prefetch" href="/assets/10.7.html-CsL-USic.js" as="script"><link rel="prefetch" href="/assets/10.8.html-cU_UYmP8.js" as="script"><link rel="prefetch" href="/assets/11.0.html-DzOFNLkI.js" as="script"><link rel="prefetch" href="/assets/11.1.html-CVDneARq.js" as="script"><link rel="prefetch" href="/assets/11.10.html-DLdzgM0_.js" as="script"><link rel="prefetch" href="/assets/11.11.html-ZUEf79aZ.js" as="script"><link rel="prefetch" href="/assets/11.12.html-moio86bV.js" as="script"><link rel="prefetch" href="/assets/11.13.html-CvewV3ew.js" as="script"><link rel="prefetch" href="/assets/11.14.html-CwU5qxN5.js" as="script"><link rel="prefetch" href="/assets/11.2.html-B8Xk39Ru.js" as="script"><link rel="prefetch" href="/assets/11.3.html-DP6_wJQP.js" as="script"><link rel="prefetch" href="/assets/11.4.html-49fB7Xvo.js" as="script"><link rel="prefetch" href="/assets/11.5.html-DTac0CFp.js" as="script"><link rel="prefetch" href="/assets/11.6.html-Jj-71bcb.js" as="script"><link rel="prefetch" href="/assets/11.7.html-DJYEY4EJ.js" as="script"><link rel="prefetch" href="/assets/11.8.html-DPQr1oVG.js" as="script"><link rel="prefetch" href="/assets/11.9.html-Bt0bssir.js" as="script"><link rel="prefetch" href="/assets/12.0.html-dQogtLlq.js" as="script"><link rel="prefetch" href="/assets/12.1.html-DXE_mHUo.js" as="script"><link rel="prefetch" href="/assets/12.10.html-BK1ALSfx.js" as="script"><link rel="prefetch" href="/assets/12.11.html-CrpC0jD-.js" as="script"><link rel="prefetch" href="/assets/12.12.html-CooGcF3E.js" as="script"><link rel="prefetch" href="/assets/12.2.html-ZVTyjB2f.js" as="script"><link rel="prefetch" href="/assets/12.3.html-qMk0sbyO.js" as="script"><link rel="prefetch" href="/assets/12.4.html-BF7d9E3U.js" as="script"><link rel="prefetch" href="/assets/12.5.html-DOFf0ilh.js" as="script"><link rel="prefetch" href="/assets/12.6.html-BsP--Ufk.js" as="script"><link rel="prefetch" href="/assets/12.7.html-1MPkaJXj.js" as="script"><link rel="prefetch" href="/assets/12.8.html-D8GtXQQP.js" as="script"><link rel="prefetch" href="/assets/12.9.html-CohRgBpn.js" as="script"><link rel="prefetch" href="/assets/13.0.html-CreAz5ks.js" as="script"><link rel="prefetch" href="/assets/13.1.html-D4zIWXVh.js" as="script"><link rel="prefetch" href="/assets/13.10.html-kNO9rh1U.js" as="script"><link rel="prefetch" href="/assets/13.2.html-C1yU2SpY.js" as="script"><link rel="prefetch" href="/assets/13.3.html-Cu4mGJyA.js" as="script"><link rel="prefetch" href="/assets/13.4.html-aR-Ee4EY.js" as="script"><link rel="prefetch" href="/assets/13.5.html-CEXE33nx.js" as="script"><link rel="prefetch" href="/assets/13.6.html-qMxTM7Tz.js" as="script"><link rel="prefetch" href="/assets/13.7.html-DsdN0OYU.js" as="script"><link rel="prefetch" href="/assets/13.8.html-BOmUwdax.js" as="script"><link rel="prefetch" href="/assets/13.9.html-7ZkPdMJ9.js" as="script"><link rel="prefetch" href="/assets/14.0.html-DurcTcL0.js" as="script"><link rel="prefetch" href="/assets/14.1.html-Ccp03uCw.js" as="script"><link rel="prefetch" href="/assets/14.10.html-DNbGnvEw.js" as="script"><link rel="prefetch" href="/assets/14.11.html-DbHSQcwt.js" as="script"><link rel="prefetch" href="/assets/14.12.html-B7qfHHg1.js" as="script"><link rel="prefetch" href="/assets/14.13.html-xlP1FcQ7.js" as="script"><link rel="prefetch" href="/assets/14.14.html-DEZkci8M.js" as="script"><link rel="prefetch" href="/assets/14.15.html-CcpRz-rx.js" as="script"><link rel="prefetch" href="/assets/14.16.html-B-ml7ep0.js" as="script"><link rel="prefetch" href="/assets/14.17.html-BwGR0yvk.js" as="script"><link rel="prefetch" href="/assets/14.2.html-BhMOdHKe.js" as="script"><link rel="prefetch" href="/assets/14.3.html-Cv7YtU1e.js" as="script"><link rel="prefetch" href="/assets/14.4.html-BlRZuBKg.js" as="script"><link rel="prefetch" href="/assets/14.5.html-De90eIKp.js" as="script"><link rel="prefetch" href="/assets/14.6.html-Dd7pNYkF.js" as="script"><link rel="prefetch" href="/assets/14.7.html-BbeVVSs6.js" as="script"><link rel="prefetch" href="/assets/14.8.html-D1E1Xwbs.js" as="script"><link rel="prefetch" href="/assets/14.9.html-DzyJl1-8.js" as="script"><link rel="prefetch" href="/assets/15.0.html-B3-P-DUo.js" as="script"><link rel="prefetch" href="/assets/15.1.html-BMAzaA0V.js" as="script"><link rel="prefetch" href="/assets/15.10.html-DpzmUNMu.js" as="script"><link rel="prefetch" href="/assets/15.11.html-Bs9z6Z8J.js" as="script"><link rel="prefetch" href="/assets/15.12.html-JAFWQ0iJ.js" as="script"><link rel="prefetch" href="/assets/15.2.html-ijnhu5Y0.js" as="script"><link rel="prefetch" href="/assets/15.3.html-XHvjsG9O.js" as="script"><link rel="prefetch" href="/assets/15.4.html-Bz5HcOrf.js" as="script"><link rel="prefetch" href="/assets/15.5.html-CmBNVHwb.js" as="script"><link rel="prefetch" href="/assets/15.6.html-C3W-qtEi.js" as="script"><link rel="prefetch" href="/assets/15.7.html-Ddy0cxF4.js" as="script"><link rel="prefetch" href="/assets/15.8.html-DFC4gFUj.js" as="script"><link rel="prefetch" href="/assets/15.9.html-BiAzkYze.js" as="script"><link rel="prefetch" href="/assets/16.0.html-CIktAcLr.js" as="script"><link rel="prefetch" href="/assets/16.1.html-BpZdp4DD.js" as="script"><link rel="prefetch" href="/assets/16.10.html-BRKt5szr.js" as="script"><link rel="prefetch" href="/assets/16.2.html-CXui5XC-.js" as="script"><link rel="prefetch" href="/assets/16.3.html-Db08GLZQ.js" as="script"><link rel="prefetch" href="/assets/16.4.html-ex0KQROM.js" as="script"><link rel="prefetch" href="/assets/16.5.html-VsStOsvR.js" as="script"><link rel="prefetch" href="/assets/16.6.html-CWmZSI_2.js" as="script"><link rel="prefetch" href="/assets/16.7.html-CM4b5Jye.js" as="script"><link rel="prefetch" href="/assets/16.8.html-BalzATae.js" as="script"><link rel="prefetch" href="/assets/16.9.html-BfrhOnAb.js" as="script"><link rel="prefetch" href="/assets/17.0.html-CXHUrq6G.js" as="script"><link rel="prefetch" href="/assets/17.1.html-AGPT-RqU.js" as="script"><link rel="prefetch" href="/assets/17.2.html-Bb16WCnH.js" as="script"><link rel="prefetch" href="/assets/17.3.html-BpyAewq3.js" as="script"><link rel="prefetch" href="/assets/17.4.html-cBjMNRvf.js" as="script"><link rel="prefetch" href="/assets/18.0.html-rKm7zc3d.js" as="script"><link rel="prefetch" href="/assets/18.1.html-gQMwXB-y.js" as="script"><link rel="prefetch" href="/assets/18.10.html-DYEiSx14.js" as="script"><link rel="prefetch" href="/assets/18.11.html-CBA8UOoD.js" as="script"><link rel="prefetch" href="/assets/18.2.html-CTZApRcd.js" as="script"><link rel="prefetch" href="/assets/18.3.html-Dcb-fo-l.js" as="script"><link rel="prefetch" href="/assets/18.4.html-VbPUvJ1W.js" as="script"><link rel="prefetch" href="/assets/18.5.html-wWA9_3iL.js" as="script"><link rel="prefetch" href="/assets/18.6.html-C71a0u1a.js" as="script"><link rel="prefetch" href="/assets/18.7.html-9WzyG31d.js" as="script"><link rel="prefetch" href="/assets/18.8.html-xOxRJQmB.js" as="script"><link rel="prefetch" href="/assets/18.9.html-DS96uovJ.js" as="script"><link rel="prefetch" href="/assets/19.0.html-DfbBkvWu.js" as="script"><link rel="prefetch" href="/assets/19.1.html-1XfJVBPI.js" as="script"><link rel="prefetch" href="/assets/19.10.html--4BRYOye.js" as="script"><link rel="prefetch" href="/assets/19.2.html-PzkPaejK.js" as="script"><link rel="prefetch" href="/assets/19.3.html-Dhqr7Iwc.js" as="script"><link rel="prefetch" href="/assets/19.4.html-1Toz6F77.js" as="script"><link rel="prefetch" href="/assets/19.5.html-BhWIqAga.js" as="script"><link rel="prefetch" href="/assets/19.6.html-Ba6ga2O7.js" as="script"><link rel="prefetch" href="/assets/19.7.html-BfH6T1_e.js" as="script"><link rel="prefetch" href="/assets/19.8.html-Buh82owD.js" as="script"><link rel="prefetch" href="/assets/19.9.html-Ck68g8vc.js" as="script"><link rel="prefetch" href="/assets/20.0.html-B8c35N13.js" as="script"><link rel="prefetch" href="/assets/20.1.html-BT42TUQN.js" as="script"><link rel="prefetch" href="/assets/20.2.html-pJjft2Jz.js" as="script"><link rel="prefetch" href="/assets/20.3.html-DJ3pzRtd.js" as="script"><link rel="prefetch" href="/assets/20.4.html-CQWeeuFr.js" as="script"><link rel="prefetch" href="/assets/20.5.html-Bs422AVL.js" as="script"><link rel="prefetch" href="/assets/20.6.html-CflDr4LM.js" as="script"><link rel="prefetch" href="/assets/20.7.html-CH2ZzonR.js" as="script"><link rel="prefetch" href="/assets/20.8.html-Bdietje8.js" as="script"><link rel="prefetch" href="/assets/21.0.html-zvMiB2jK.js" as="script"><link rel="prefetch" href="/assets/21.1.html-DGmS19j8.js" as="script"><link rel="prefetch" href="/assets/21.2.html-CpWQo4j1.js" as="script"><link rel="prefetch" href="/assets/21.3.html-0OFiGCR_.js" as="script"><link rel="prefetch" href="/assets/21.4.html-5BrXRnkE.js" as="script"><link rel="prefetch" href="/assets/21.5.html-DPEV2HhV.js" as="script"><link rel="prefetch" href="/assets/代码补全.html-BUBz9Fwc.js" as="script"><link rel="prefetch" href="/assets/图像生成.html-CfCSRVaC.js" as="script"><link rel="prefetch" href="/assets/安全最佳实践.html-SoPVYDvG.js" as="script"><link rel="prefetch" href="/assets/审核.html-DKB7LJQp.js" as="script"><link rel="prefetch" href="/assets/微调.html-B3jYGIVH.js" as="script"><link rel="prefetch" href="/assets/文本补全.html-CaPPW8UW.js" as="script"><link rel="prefetch" href="/assets/生产最佳实践.html-C2brpABt.js" as="script"><link rel="prefetch" href="/assets/速率限制.html-WEy4cpmi.js" as="script"><link rel="prefetch" href="/assets/错误状态码.html-beVo4FUJ.js" as="script"><link rel="prefetch" href="/assets/介绍.html-DWSLTx96.js" as="script"><link rel="prefetch" href="/assets/使用政策.html-B58OOuRc.js" as="script"><link rel="prefetch" href="/assets/如何构建可以回答有关您网站的问题的-AI.html-BASypKYV.js" as="script"><link rel="prefetch" href="/assets/库.html-CKEmRIu8.js" as="script"><link rel="prefetch" href="/assets/快速开始.html-Bi0cQAVx.js" as="script"><link rel="prefetch" href="/assets/教程.html-CdbZYQLZ.js" as="script"><link rel="prefetch" href="/assets/模型.html-D9OC_ema.js" as="script"><link rel="prefetch" href="/assets/404.html-6BVqY2BK.js" as="script"><link rel="prefetch" href="/assets/setupDevtools-7MC2TMWH-BreutQJ-.js" as="script">
  </head>
  <body>
    <div id="app"><!--[--><div class="vp-theme-container external-link-icon" vp-container><!--[--><header class="vp-navbar" vp-navbar><div class="vp-toggle-sidebar-button" title="toggle sidebar" aria-expanded="false" role="button" tabindex="0"><div class="icon" aria-hidden="true"><span></span><span></span><span></span></div></div><span><a class="route-link" href="/"><img class="vp-site-logo" src="/images/logo.svg" alt="Go 入门指南 "><span class="vp-site-name vp-hide-mobile" aria-hidden="true">Go 入门指南 </span></a></span><div class="vp-navbar-items-wrapper" style=""><!--[--><!--]--><nav class="vp-navbar-items vp-hide-mobile" aria-label="site navigation"><!--[--><div class="vp-navbar-item"><a class="auto-link external-link" href="https://openai.com/" aria-label="官网" rel="noopener noreferrer" target="_blank"><!---->官网<!----></a></div><div class="vp-navbar-item"><a class="auto-link external-link" href="https://github.com/unknwon/the-way-to-go_ZH_CN" aria-label="译者 GitHub" rel="noopener noreferrer" target="_blank"><!---->译者 GitHub<!----></a></div><!--]--></nav><!--[--><!--]--><button type="button" class="vp-toggle-color-mode-button" title="toggle color mode"><svg class="light-icon" viewbox="0 0 32 32" style=""><path d="M16 12.005a4 4 0 1 1-4 4a4.005 4.005 0 0 1 4-4m0-2a6 6 0 1 0 6 6a6 6 0 0 0-6-6z" fill="currentColor"></path><path d="M5.394 6.813l1.414-1.415l3.506 3.506L8.9 10.318z" fill="currentColor"></path><path d="M2 15.005h5v2H2z" fill="currentColor"></path><path d="M5.394 25.197L8.9 21.691l1.414 1.415l-3.506 3.505z" fill="currentColor"></path><path d="M15 25.005h2v5h-2z" fill="currentColor"></path><path d="M21.687 23.106l1.414-1.415l3.506 3.506l-1.414 1.414z" fill="currentColor"></path><path d="M25 15.005h5v2h-5z" fill="currentColor"></path><path d="M21.687 8.904l3.506-3.506l1.414 1.415l-3.506 3.505z" fill="currentColor"></path><path d="M15 2.005h2v5h-2z" fill="currentColor"></path></svg><svg class="dark-icon" viewbox="0 0 32 32" style="display:none;"><path d="M13.502 5.414a15.075 15.075 0 0 0 11.594 18.194a11.113 11.113 0 0 1-7.975 3.39c-.138 0-.278.005-.418 0a11.094 11.094 0 0 1-3.2-21.584M14.98 3a1.002 1.002 0 0 0-.175.016a13.096 13.096 0 0 0 1.825 25.981c.164.006.328 0 .49 0a13.072 13.072 0 0 0 10.703-5.555a1.01 1.01 0 0 0-.783-1.565A13.08 13.08 0 0 1 15.89 4.38A1.015 1.015 0 0 0 14.98 3z" fill="currentColor"></path></svg></button><!----></div></header><!--]--><div class="vp-sidebar-mask"></div><!--[--><aside class="vp-sidebar" vp-sidebar><nav class="vp-navbar-items" aria-label="site navigation"><!--[--><div class="vp-navbar-item"><a class="auto-link external-link" href="https://openai.com/" aria-label="官网" rel="noopener noreferrer" target="_blank"><!---->官网<!----></a></div><div class="vp-navbar-item"><a class="auto-link external-link" href="https://github.com/unknwon/the-way-to-go_ZH_CN" aria-label="译者 GitHub" rel="noopener noreferrer" target="_blank"><!---->译者 GitHub<!----></a></div><!--]--></nav><!--[--><!--]--><ul class="vp-sidebar-items"><!--[--><li><a class="route-link auto-link vp-sidebar-item vp-sidebar-heading" href="/preface.html" aria-label="前言"><!---->前言<!----></a><!----></li><li><p tabindex="0" class="vp-sidebar-item vp-sidebar-heading">学习 Go 语言 <!----></p><ul style="" class="vp-sidebar-children"><!--[--><li><p tabindex="0" class="vp-sidebar-item">第1章：Go 语言的起源，发展与普及 <!----></p><ul style="" class="vp-sidebar-children"><!--[--><li><a class="route-link auto-link vp-sidebar-item" href="/chapter-1/01.1.html" aria-label="1.1 起源与发展"><!---->1.1 起源与发展<!----></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/chapter-1/01.2.html" aria-label="1.2 语言的主要特性与发展的环境和影响因素"><!---->1.2 语言的主要特性与发展的环境和影响因素<!----></a><!----></li><!--]--></ul></li><li><p tabindex="0" class="vp-sidebar-item">第2章：安装与运行环境 <!----></p><ul style="" class="vp-sidebar-children"><!--[--><li><a class="route-link auto-link vp-sidebar-item" href="/chapter-1/02.1.html" aria-label="2.1 平台与架构"><!---->2.1 平台与架构<!----></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/chapter-1/02.2.html" aria-label="2.2 Go 环境变量"><!---->2.2 Go 环境变量<!----></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/chapter-1/02.3.html" aria-label="2.3 在 Linux 上安装 Go"><!---->2.3 在 Linux 上安装 Go<!----></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/chapter-1/02.4.html" aria-label="2.4 在 Mac OS X 上安装 Go"><!---->2.4 在 Mac OS X 上安装 Go<!----></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/chapter-1/02.5.html" aria-label="2.5 在 Windows 上安装 Go"><!---->2.5 在 Windows 上安装 Go<!----></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/chapter-1/02.6.html" aria-label="2.6 安装目录清单"><!---->2.6 安装目录清单<!----></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/chapter-1/02.7.html" aria-label="2.7 Go 运行时 (runtime)"><!---->2.7 Go 运行时 (runtime)<!----></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/chapter-1/02.8.html" aria-label="2.8 Go 解释器"><!---->2.8 Go 解释器<!----></a><!----></li><!--]--></ul></li><li><p tabindex="0" class="vp-sidebar-item">第3章：编辑器、集成开发环境与其它工具 <!----></p><ul style="" class="vp-sidebar-children"><!--[--><li><a class="route-link auto-link vp-sidebar-item" href="/chapter-1/03.1.html" aria-label="3.1 Go 开发环境的基本要求"><!---->3.1 Go 开发环境的基本要求<!----></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/chapter-1/03.2.html" aria-label="3.2 编辑器和集成开发环境"><!---->3.2 编辑器和集成开发环境<!----></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/chapter-1/03.3.html" aria-label="3.3 调试器"><!---->3.3 调试器<!----></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/chapter-1/03.4.html" aria-label="3.4 构建并运行 Go 程序"><!---->3.4 构建并运行 Go 程序<!----></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/chapter-1/03.5.html" aria-label="3.5 格式化代码"><!---->3.5 格式化代码<!----></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/chapter-1/03.6.html" aria-label="3.6 生成代码文档"><!---->3.6 生成代码文档<!----></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/chapter-1/03.7.html" aria-label="3.7 其它工具"><!---->3.7 其它工具<!----></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/chapter-1/03.8.html" aria-label="3.8 Go 性能说明"><!---->3.8 Go 性能说明<!----></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/chapter-1/03.9.html" aria-label="3.9 与其它语言进行交互"><!---->3.9 与其它语言进行交互<!----></a><!----></li><!--]--></ul></li><!--]--></ul></li><li><p tabindex="0" class="vp-sidebar-item vp-sidebar-heading">语言的核心结构与技术 <!----></p><ul style="" class="vp-sidebar-children"><!--[--><li><p tabindex="0" class="vp-sidebar-item">第4章：基本结构和基本数据类型 <!----></p><ul style="" class="vp-sidebar-children"><!--[--><li><a class="route-link auto-link vp-sidebar-item" href="/chapter-2/04.1.html" aria-label="4.1 文件名、关键字与标识符"><!---->4.1 文件名、关键字与标识符<!----></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/chapter-2/04.2.html" aria-label="4.2 Go 程序的基本结构和要素"><!---->4.2 Go 程序的基本结构和要素<!----></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/chapter-2/04.3.html" aria-label="4.3 常量"><!---->4.3 常量<!----></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/chapter-2/04.4.html" aria-label="4.4 变量"><!---->4.4 变量<!----></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/chapter-2/04.5.html" aria-label="4.5 基本类型和运算符"><!---->4.5 基本类型和运算符<!----></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/chapter-2/04.6.html" aria-label="4.6 字符串"><!---->4.6 字符串<!----></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/chapter-2/04.7.html" aria-label="4.7 strings 和 strconv 包"><!---->4.7 strings 和 strconv 包<!----></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/chapter-2/04.8.html" aria-label="4.8 时间和日期"><!---->4.8 时间和日期<!----></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/chapter-2/04.9.html" aria-label="4.9 指针"><!---->4.9 指针<!----></a><!----></li><!--]--></ul></li><li><p tabindex="0" class="vp-sidebar-item">第5章：控制结构 <!----></p><ul style="" class="vp-sidebar-children"><!--[--><li><a class="route-link auto-link vp-sidebar-item" href="/chapter-2/05.1.html" aria-label="5.1 if-else 结构"><!---->5.1 if-else 结构<!----></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/chapter-2/05.2.html" aria-label="5.2 测试多返回值函数的错误"><!---->5.2 测试多返回值函数的错误<!----></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/chapter-2/05.3.html" aria-label="5.3 switch 结构"><!---->5.3 switch 结构<!----></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/chapter-2/05.4.html" aria-label="5.4 for 结构"><!---->5.4 for 结构<!----></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/chapter-2/05.5.html" aria-label="5.5 break 与 continue"><!---->5.5 break 与 continue<!----></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/chapter-2/05.6.html" aria-label="5.6 标签与 goto"><!---->5.6 标签与 goto<!----></a><!----></li><!--]--></ul></li><li><p tabindex="0" class="vp-sidebar-item">第6章：函数（function） <!----></p><ul style="" class="vp-sidebar-children"><!--[--><li><a class="route-link auto-link vp-sidebar-item" href="/chapter-2/06.1.html" aria-label="6.1 介绍"><!---->6.1 介绍<!----></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/chapter-2/06.2.html" aria-label="6.2 函数参数与返回值"><!---->6.2 函数参数与返回值<!----></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/chapter-2/06.3.html" aria-label="6.3 传递变长参数"><!---->6.3 传递变长参数<!----></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/chapter-2/06.4.html" aria-label="6.4 defer 和追踪"><!---->6.4 defer 和追踪<!----></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/chapter-2/06.5.html" aria-label="6.5 内置函数"><!---->6.5 内置函数<!----></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/chapter-2/06.6.html" aria-label="6.6 递归函数"><!---->6.6 递归函数<!----></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/chapter-2/06.7.html" aria-label="6.7 将函数作为参数"><!---->6.7 将函数作为参数<!----></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/chapter-2/06.8.html" aria-label="6.8 闭包"><!---->6.8 闭包<!----></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/chapter-2/06.9.html" aria-label="6.9 应用闭包：将函数作为返回值"><!---->6.9 应用闭包：将函数作为返回值<!----></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/chapter-2/06.10.html" aria-label="6.10 使用闭包调试"><!---->6.10 使用闭包调试<!----></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/chapter-2/06.11.html" aria-label="6.11 计算函数执行时间"><!---->6.11 计算函数执行时间<!----></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/chapter-2/06.12.html" aria-label="6.12 通过内存缓存来提升性能"><!---->6.12 通过内存缓存来提升性能<!----></a><!----></li><!--]--></ul></li><li><p tabindex="0" class="vp-sidebar-item">第7章：数组与切片 <!----></p><ul style="" class="vp-sidebar-children"><!--[--><li><a class="route-link auto-link vp-sidebar-item" href="/chapter-2/06.1.html" aria-label="6.1 介绍"><!---->6.1 介绍<!----></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/chapter-2/06.2.html" aria-label="6.2 函数参数与返回值"><!---->6.2 函数参数与返回值<!----></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/chapter-2/06.3.html" aria-label="6.3 传递变长参数"><!---->6.3 传递变长参数<!----></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/chapter-2/06.4.html" aria-label="6.4 defer 和追踪"><!---->6.4 defer 和追踪<!----></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/chapter-2/06.5.html" aria-label="6.5 内置函数"><!---->6.5 内置函数<!----></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/chapter-2/06.6.html" aria-label="6.6 递归函数"><!---->6.6 递归函数<!----></a><!----></li><!--]--></ul></li><li><p tabindex="0" class="vp-sidebar-item">第8章：Map <!----></p><ul style="" class="vp-sidebar-children"><!--[--><li><a class="route-link auto-link vp-sidebar-item" href="/chapter-2/08.1.html" aria-label="8.1 声明、初始化和 make"><!---->8.1 声明、初始化和 make<!----></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/chapter-2/08.2.html" aria-label="8.2 测试键值对是否存在及删除元素"><!---->8.2 测试键值对是否存在及删除元素<!----></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/chapter-2/08.3.html" aria-label="8.3 for-range 的配套用法"><!---->8.3 for-range 的配套用法<!----></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/chapter-2/08.4.html" aria-label="8.4 map 类型的切片"><!---->8.4 map 类型的切片<!----></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/chapter-2/08.5.html" aria-label="8.5 map 的排序"><!---->8.5 map 的排序<!----></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/chapter-2/08.6.html" aria-label="8.6 将 map 的键值对调"><!---->8.6 将 map 的键值对调<!----></a><!----></li><!--]--></ul></li><li><p tabindex="0" class="vp-sidebar-item">第9章：包（package） <!----></p><ul style="" class="vp-sidebar-children"><!--[--><li><a class="route-link auto-link vp-sidebar-item" href="/chapter-2/09.1.html" aria-label="9.1 标准库概述"><!---->9.1 标准库概述<!----></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/chapter-2/09.2.html" aria-label="9.2 regexp 包"><!---->9.2 regexp 包<!----></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/chapter-2/09.3.html" aria-label="9.3 锁和 sync 包"><!---->9.3 锁和 sync 包<!----></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/chapter-2/09.4.html" aria-label="9.4 精密计算和 big 包"><!---->9.4 精密计算和 big 包<!----></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/chapter-2/09.5.html" aria-label="9.5 自定义包和可见性"><!---->9.5 自定义包和可见性<!----></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/chapter-2/09.6.html" aria-label="9.6 为自定义包使用 godoc"><!---->9.6 为自定义包使用 godoc<!----></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/chapter-2/09.7.html" aria-label="9.7 使用 go install 安装自定义包"><!---->9.7 使用 go install 安装自定义包<!----></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/chapter-2/09.8.html" aria-label="9.8 自定义包的目录结构、go install 和 go test"><!---->9.8 自定义包的目录结构、go install 和 go test<!----></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/chapter-2/09.9.html" aria-label="9.9 通过 Git 打包和安装"><!---->9.9 通过 Git 打包和安装<!----></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/chapter-2/09.10.html" aria-label="9.10 Go 的外部包和项目"><!---->9.10 Go 的外部包和项目<!----></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/chapter-2/09.11.html" aria-label="9.11 在 Go 程序中使用外部库"><!---->9.11 在 Go 程序中使用外部库<!----></a><!----></li><!--]--></ul></li><li><p tabindex="0" class="vp-sidebar-item">第10章：结构（struct）与方法（method） <!----></p><ul style="" class="vp-sidebar-children"><!--[--><li><a class="route-link auto-link vp-sidebar-item" href="/chapter-2/10.1.html" aria-label="10.1 结构体定义"><!---->10.1 结构体定义<!----></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/chapter-2/10.2.html" aria-label="10.2 使用工厂方法创建结构体实例"><!---->10.2 使用工厂方法创建结构体实例<!----></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/chapter-2/10.3.html" aria-label="10.3 使用自定义包中的结构体"><!---->10.3 使用自定义包中的结构体<!----></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/chapter-2/10.4.html" aria-label="10.4 带标签的结构体"><!---->10.4 带标签的结构体<!----></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/chapter-2/10.5.html" aria-label="10.5 匿名字段和内嵌结构体"><!---->10.5 匿名字段和内嵌结构体<!----></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/chapter-2/10.6.html" aria-label="10.6 方法"><!---->10.6 方法<!----></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/chapter-2/10.7.html" aria-label="10.7 类型的 String() 方法和格式化描述符"><!---->10.7 类型的 String() 方法和格式化描述符<!----></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/chapter-2/10.8.html" aria-label="10.8 垃圾回收和 SetFinalizer"><!---->10.8 垃圾回收和 SetFinalizer<!----></a><!----></li><!--]--></ul></li><li><p tabindex="0" class="vp-sidebar-item">第11章：接口（interface）与反射（reflection） <!----></p><ul style="" class="vp-sidebar-children"><!--[--><li><a class="route-link auto-link vp-sidebar-item" href="/chapter-2/11.1.html" aria-label="11.1 接口是什么"><!---->11.1 接口是什么<!----></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/chapter-2/11.2.html" aria-label="11.2 接口嵌套接口"><!---->11.2 接口嵌套接口<!----></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/chapter-2/11.3.html" aria-label="11.3 类型断言：如何检测和转换接口变量的类型"><!---->11.3 类型断言：如何检测和转换接口变量的类型<!----></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/chapter-2/11.4.html" aria-label="11.4 类型判断：type-switch"><!---->11.4 类型判断：type-switch<!----></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/chapter-2/11.5.html" aria-label="11.5 测试一个值是否实现了某个接口"><!---->11.5 测试一个值是否实现了某个接口<!----></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/chapter-2/11.6.html" aria-label="11.6 使用方法集与接口"><!---->11.6 使用方法集与接口<!----></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/chapter-2/11.7.html" aria-label="11.7 第一个例子：使用 Sorter 接口排序"><!---->11.7 第一个例子：使用 Sorter 接口排序<!----></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/chapter-2/11.8.html" aria-label="11.8 第二个例子：读和写"><!---->11.8 第二个例子：读和写<!----></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/chapter-2/11.9.html" aria-label="11.9 空接口"><!---->11.9 空接口<!----></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/chapter-2/11.10.html" aria-label="11.10 反射包"><!---->11.10 反射包<!----></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/chapter-2/11.11.html" aria-label="11.11 Printf() 和反射"><!---->11.11 Printf() 和反射<!----></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/chapter-2/11.12.html" aria-label="11.12 接口与动态类型"><!---->11.12 接口与动态类型<!----></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/chapter-2/11.13.html" aria-label="11.13 总结：Go 中的面向对象"><!---->11.13 总结：Go 中的面向对象<!----></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/chapter-2/11.14.html" aria-label="11.14 结构体、集合和高阶函数"><!---->11.14 结构体、集合和高阶函数<!----></a><!----></li><!--]--></ul></li><!--]--></ul></li><li><p tabindex="0" class="vp-sidebar-item vp-sidebar-heading">Go 高级编程 <!----></p><ul style="" class="vp-sidebar-children"><!--[--><li><p tabindex="0" class="vp-sidebar-item">第12章：读写数据 <!----></p><ul style="" class="vp-sidebar-children"><!--[--><li><a class="route-link auto-link vp-sidebar-item" href="/chapter-3/12.1.html" aria-label="12.1 读取用户的输入"><!---->12.1 读取用户的输入<!----></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/chapter-3/12.2.html" aria-label="12.2 文件读写"><!---->12.2 文件读写<!----></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/chapter-3/12.3.html" aria-label="12.3 文件拷贝"><!---->12.3 文件拷贝<!----></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/chapter-3/12.4.html" aria-label="12.4 从命令行读取参数"><!---->12.4 从命令行读取参数<!----></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/chapter-3/12.5.html" aria-label="12.5 用 buffer 读取文件"><!---->12.5 用 buffer 读取文件<!----></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/chapter-3/12.6.html" aria-label="12.6 用切片读写文件"><!---->12.6 用切片读写文件<!----></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/chapter-3/12.7.html" aria-label="12.7 用 defer 关闭文件"><!---->12.7 用 defer 关闭文件<!----></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/chapter-3/12.8.html" aria-label="12.8 使用接口的实际例子：fmt.Fprintf"><!---->12.8 使用接口的实际例子：fmt.Fprintf<!----></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/chapter-3/12.9.html" aria-label="12.9 JSON 数据格式"><!---->12.9 JSON 数据格式<!----></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/chapter-3/12.10.html" aria-label="12.10 XML 数据格式"><!---->12.10 XML 数据格式<!----></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/chapter-3/12.11.html" aria-label="12.11 用 Gob 传输数据"><!---->12.11 用 Gob 传输数据<!----></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/chapter-3/12.12.html" aria-label="12.12 Go 中的密码学"><!---->12.12 Go 中的密码学<!----></a><!----></li><!--]--></ul></li><li><p tabindex="0" class="vp-sidebar-item">第13章：错误处理与测试 <!----></p><ul style="" class="vp-sidebar-children"><!--[--><li><a class="route-link auto-link vp-sidebar-item" href="/chapter-3/13.1.html" aria-label="13.1 错误处理"><!---->13.1 错误处理<!----></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/chapter-3/13.2.html" aria-label="13.2 运行时异常和 panic"><!---->13.2 运行时异常和 panic<!----></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/chapter-3/13.3.html" aria-label="13.3 从 panic 中恢复 (recover)"><!---->13.3 从 panic 中恢复 (recover)<!----></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/chapter-3/13.4.html" aria-label="13.4 自定义包中的错误处理和 panicking"><!---->13.4 自定义包中的错误处理和 panicking<!----></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/chapter-3/13.5.html" aria-label="13.5 一种用闭包处理错误的模式"><!---->13.5 一种用闭包处理错误的模式<!----></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/chapter-3/13.6.html" aria-label="13.6 启动外部命令和程序"><!---->13.6 启动外部命令和程序<!----></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/chapter-3/13.7.html" aria-label="13.7 Go 中的单元测试和基准测试"><!---->13.7 Go 中的单元测试和基准测试<!----></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/chapter-3/13.8.html" aria-label="13.8 测试的具体例子"><!---->13.8 测试的具体例子<!----></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/chapter-3/13.9.html" aria-label="13.9 用（测试数据）表驱动测试"><!---->13.9 用（测试数据）表驱动测试<!----></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/chapter-3/13.10.html" aria-label="13.10 性能调试：分析并优化 Go 程序"><!---->13.10 性能调试：分析并优化 Go 程序<!----></a><!----></li><!--]--></ul></li><li><p tabindex="0" class="vp-sidebar-item">第14章：协程 (goroutine) 与通道 (channel) <!----></p><ul style="" class="vp-sidebar-children"><!--[--><li><a class="route-link auto-link vp-sidebar-item" href="/chapter-3/14.1.html" aria-label="14.1 并发、并行和协程"><!---->14.1 并发、并行和协程<!----></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/chapter-3/14.2.html" aria-label="14.2 协程间的信道"><!---->14.2 协程间的信道<!----></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/chapter-3/14.3.html" aria-label="14.3 协程的同步：关闭通道-测试阻塞的通道"><!---->14.3 协程的同步：关闭通道-测试阻塞的通道<!----></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/chapter-3/14.4.html" aria-label="14.4 使用 select 切换协程"><!---->14.4 使用 select 切换协程<!----></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/chapter-3/14.5.html" aria-label="14.5 通道、超时和计时器（Ticker）"><!---->14.5 通道、超时和计时器（Ticker）<!----></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/chapter-3/14.6.html" aria-label="14.6 协程和恢复 (recover)"><!---->14.6 协程和恢复 (recover)<!----></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/chapter-3/14.7.html" aria-label="14.7 新旧模型对比：任务和 worker"><!---->14.7 新旧模型对比：任务和 worker<!----></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/chapter-3/14.8.html" aria-label="14.8 惰性生成器的实现"><!---->14.8 惰性生成器的实现<!----></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/chapter-3/14.9.html" aria-label="14.9 实现 Futures 模式"><!---->14.9 实现 Futures 模式<!----></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/chapter-3/14.10.html" aria-label="14.10 复用"><!---->14.10 复用<!----></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/chapter-3/14.11.html" aria-label="14.11 限制同时处理的请求数"><!---->14.11 限制同时处理的请求数<!----></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/chapter-3/14.12.html" aria-label="14.12 链式协程"><!---->14.12 链式协程<!----></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/chapter-3/14.13.html" aria-label="14.13 在多核心上并行计算"><!---->14.13 在多核心上并行计算<!----></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/chapter-3/14.14.html" aria-label="14.14 并行化大量数据的计算"><!---->14.14 并行化大量数据的计算<!----></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/chapter-3/14.15.html" aria-label="14.15 漏桶算法"><!---->14.15 漏桶算法<!----></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/chapter-3/14.16.html" aria-label="14.16 对 Go 协程进行基准测试"><!---->14.16 对 Go 协程进行基准测试<!----></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/chapter-3/14.17.html" aria-label="14.17 使用通道并发访问对象"><!---->14.17 使用通道并发访问对象<!----></a><!----></li><!--]--></ul></li><li><p tabindex="0" class="vp-sidebar-item">第 15 章：网络、模板与网页应用 <!----></p><ul style="" class="vp-sidebar-children"><!--[--><li><a class="route-link auto-link vp-sidebar-item" href="/chapter-3/15.1.html" aria-label="15.1 tcp 服务器"><!---->15.1 tcp 服务器<!----></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/chapter-3/15.2.html" aria-label="15.2 一个简单的 web 服务器"><!---->15.2 一个简单的 web 服务器<!----></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/chapter-3/15.3.html" aria-label="15.3 访问并读取页面数据"><!---->15.3 访问并读取页面数据<!----></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/chapter-3/15.4.html" aria-label="15.4 写一个简单的网页应用"><!---->15.4 写一个简单的网页应用<!----></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/chapter-3/15.5.html" aria-label="15.5 确保网页应用健壮"><!---->15.5 确保网页应用健壮<!----></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/chapter-3/15.6.html" aria-label="15.6 用模板编写网页应用"><!---->15.6 用模板编写网页应用<!----></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/chapter-3/15.7.html" aria-label="15.7 探索 template 包"><!---->15.7 探索 template 包<!----></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/chapter-3/15.8.html" aria-label="15.8 精巧的多功能网页服务器"><!---->15.8 精巧的多功能网页服务器<!----></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/chapter-3/15.9.html" aria-label="15.9 用 rpc 实现远程过程调用"><!---->15.9 用 rpc 实现远程过程调用<!----></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/chapter-3/15.10.html" aria-label="15.10 基于网络的通道 netchan"><!---->15.10 基于网络的通道 netchan<!----></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/chapter-3/15.11.html" aria-label="15.11 与 websocket 通信"><!---->15.11 与 websocket 通信<!----></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/chapter-3/15.12.html" aria-label="15.12 用 smtp 发送邮件"><!---->15.12 用 smtp 发送邮件<!----></a><!----></li><!--]--></ul></li><!--]--></ul></li><li><p tabindex="0" class="vp-sidebar-item vp-sidebar-heading">实际应用 <!----></p><ul style="" class="vp-sidebar-children"><!--[--><li><p tabindex="0" class="vp-sidebar-item">第16章：常见的陷阱与错误 <!----></p><ul style="" class="vp-sidebar-children"><!--[--><li><a class="route-link auto-link vp-sidebar-item" href="/chapter-4/16.1.html" aria-label="16.1 误用短声明导致变量覆盖"><!---->16.1 误用短声明导致变量覆盖<!----></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/chapter-4/16.2.html" aria-label="16.2 误用字符串"><!---->16.2 误用字符串<!----></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/chapter-4/16.3.html" aria-label="16.3 发生错误时使用 defer 关闭一个文件"><!---->16.3 发生错误时使用 defer 关闭一个文件<!----></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/chapter-4/16.4.html" aria-label="16.4 何时使用 new() 和 make()"><!---->16.4 何时使用 new() 和 make()<!----></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/chapter-4/16.5.html" aria-label="16.5 不需要将一个指向切片的指针传递给函数"><!---->16.5 不需要将一个指向切片的指针传递给函数<!----></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/chapter-4/16.6.html" aria-label="16.6 使用指针指向接口类型"><!---->16.6 使用指针指向接口类型<!----></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/chapter-4/16.7.html" aria-label="16.7 使用值类型时误用指针"><!---->16.7 使用值类型时误用指针<!----></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/chapter-4/16.8.html" aria-label="16.8 误用协程和通道"><!---->16.8 误用协程和通道<!----></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/chapter-4/16.9.html" aria-label="16.9 闭包和协程的使用"><!---->16.9 闭包和协程的使用<!----></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/chapter-4/16.10.html" aria-label="16.10 糟糕的错误处理"><!---->16.10 糟糕的错误处理<!----></a><!----></li><!--]--></ul></li><li><p tabindex="0" class="vp-sidebar-item">第17章：模式 <!----></p><ul style="" class="vp-sidebar-children"><!--[--><li><a class="route-link auto-link vp-sidebar-item" href="/chapter-4/17.1.html" aria-label="17.1 逗号 ok 模式"><!---->17.1 逗号 ok 模式<!----></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/chapter-4/17.2.html" aria-label="17.2 defer 模式"><!---->17.2 defer 模式<!----></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/chapter-4/17.3.html" aria-label="17.3 可见性模式"><!---->17.3 可见性模式<!----></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/chapter-4/17.4.html" aria-label="17.4 运算符模式和接口"><!---->17.4 运算符模式和接口<!----></a><!----></li><!--]--></ul></li><li><p tabindex="0" class="vp-sidebar-item">第18章：出于性能考虑的实用代码片段 <!----></p><ul style="" class="vp-sidebar-children"><!--[--><li><a class="route-link auto-link vp-sidebar-item" href="/chapter-4/18.1.html" aria-label="18.1 字符串"><!---->18.1 字符串<!----></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/chapter-4/18.2.html" aria-label="18.2 数组和切片"><!---->18.2 数组和切片<!----></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/chapter-4/18.3.html" aria-label="18.3 映射"><!---->18.3 映射<!----></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/chapter-4/18.4.html" aria-label="18.4 结构体"><!---->18.4 结构体<!----></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/chapter-4/18.5.html" aria-label="18.5 接口"><!---->18.5 接口<!----></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/chapter-4/18.6.html" aria-label="18.6 函数"><!---->18.6 函数<!----></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/chapter-4/18.7.html" aria-label="18.7 文件"><!---->18.7 文件<!----></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/chapter-4/18.8.html" aria-label="18.8 协程 (goroutine) 与通道 (channel)"><!---->18.8 协程 (goroutine) 与通道 (channel)<!----></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/chapter-4/18.9.html" aria-label="18.9 网络和网页应用"><!---->18.9 网络和网页应用<!----></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/chapter-4/18.10.html" aria-label="18.10 其他"><!---->18.10 其他<!----></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/chapter-4/18.11.html" aria-label="18.11 出于性能考虑的最佳实践和建议"><!---->18.11 出于性能考虑的最佳实践和建议<!----></a><!----></li><!--]--></ul></li><li><p tabindex="0" class="vp-sidebar-item">第19章：构建一个完整的应用程序 <!----></p><ul style="" class="vp-sidebar-children"><!--[--><li><a class="route-link auto-link vp-sidebar-item" href="/chapter-4/19.1.html" aria-label="19.1 简介"><!---->19.1 简介<!----></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/chapter-4/19.2.html" aria-label="19.2 短网址项目简介"><!---->19.2 短网址项目简介<!----></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/chapter-4/19.3.html" aria-label="版本 1 - 数据结构和前端界面"><!---->版本 1 - 数据结构和前端界面<!----></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/chapter-4/19.4.html" aria-label="19.4 用户界面：web 服务端"><!---->19.4 用户界面：web 服务端<!----></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/chapter-4/19.5.html" aria-label="版本 2 - 添加持久化存储"><!---->版本 2 - 添加持久化存储<!----></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/chapter-4/19.6.html" aria-label="版本 3 - 添加协程"><!---->版本 3 - 添加协程<!----></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/chapter-4/19.7.html" aria-label="版本 4 - 用 JSON 持久化存储"><!---->版本 4 - 用 JSON 持久化存储<!----></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/chapter-4/19.8.html" aria-label="版本 5 - 分布式程序"><!---->版本 5 - 分布式程序<!----></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/chapter-4/19.9.html" aria-label="19.9 使用代理缓存"><!---->19.9 使用代理缓存<!----></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/chapter-4/19.10.html" aria-label="19.10 总结和增强"><!---->19.10 总结和增强<!----></a><!----></li><!--]--></ul></li><li><p tabindex="0" class="vp-sidebar-item">第20章：Go 语言在 Google App Engine 的使用 <!----></p><ul style="" class="vp-sidebar-children"><!--[--><li><a class="route-link auto-link vp-sidebar-item" href="/chapter-4/20.1.html" aria-label="20.1 什么是 Google App Engine？"><!---->20.1 什么是 Google App Engine？<!----></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/chapter-4/20.2.html" aria-label="20.2 云上的 Go"><!---->20.2 云上的 Go<!----></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/chapter-4/20.3.html" aria-label="20.3 安装 Go App Engine SDK：为 Go 部署的开发环境"><!---->20.3 安装 Go App Engine SDK：为 Go 部署的开发环境<!----></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/chapter-4/20.4.html" aria-label="20.4 建造你自己的 Hello world 应用"><!---->20.4 建造你自己的 Hello world 应用<!----></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/chapter-4/20.5.html" aria-label="20.5 使用用户服务和探索其 API"><!---->20.5 使用用户服务和探索其 API<!----></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/chapter-4/20.6.html" aria-label="20.6 处理窗口"><!---->20.6 处理窗口<!----></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/chapter-4/20.7.html" aria-label="20.7 使用数据存储"><!---->20.7 使用数据存储<!----></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/chapter-4/20.8.html" aria-label="20.8 上传到云端"><!---->20.8 上传到云端<!----></a><!----></li><!--]--></ul></li><li><p tabindex="0" class="vp-sidebar-item">第21章：实世界中 Go 的使用 <!----></p><ul style="" class="vp-sidebar-children"><!--[--><li><a class="route-link auto-link vp-sidebar-item" href="/chapter-4/21.1.html" aria-label="21.1 Heroku：一个使用 Go 的高度可用一致数据存储"><!---->21.1 Heroku：一个使用 Go 的高度可用一致数据存储<!----></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/chapter-4/21.2.html" aria-label="21.2 MROffice：一个使用 Go 的呼叫中心网络电话 (VOIP) 系统"><!---->21.2 MROffice：一个使用 Go 的呼叫中心网络电话 (VOIP) 系统<!----></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/chapter-4/21.3.html" aria-label="21.3 Atlassian：一个虚拟机群管理系统"><!---->21.3 Atlassian：一个虚拟机群管理系统<!----></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/chapter-4/21.4.html" aria-label="21.4 Camilistore：一个可寻址内容存储系统"><!---->21.4 Camilistore：一个可寻址内容存储系统<!----></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/chapter-4/21.5.html" aria-label="21.5 Go 语言的其他应用"><!---->21.5 Go 语言的其他应用<!----></a><!----></li><!--]--></ul></li><!--]--></ul></li><!--]--></ul><!--[--><!--]--></aside><!--]--><!--[--><main class="vp-page"><!--[--><!--]--><div class="theme-default-content" vp-content><!--[--><!--]--><div><h1 id="嵌入" tabindex="-1"><a class="header-anchor" href="#嵌入"><span><a href="https://platform.openai.com/docs/guides/embeddings/embeddings" target="_blank" rel="noopener noreferrer">嵌入</a></span></a></h1><h2 id="什么是嵌入" tabindex="-1"><a class="header-anchor" href="#什么是嵌入"><span>什么是嵌入？</span></a></h2><p>OpenAI 的文本嵌入衡量文本字符串的相关性。嵌入通常用于：</p><ul><li><strong>搜索</strong>（结果按与查询字符串的相关性排序）</li><li><strong>聚类</strong>（其中文本字符串按相似性分组）</li><li><strong>推荐</strong>（推荐具有相关文本字符串的项目）</li><li><strong>异常检测</strong>（识别出相关性很小的异常值）</li><li><strong>多样性测量</strong>（分析相似性分布）</li><li><strong>分类</strong>（其中文本字符串按其最相似的标签分类）</li></ul><p>嵌入是浮点数的向量（列表）。两个向量之间的<a href="https://platform.openai.com/docs/guides/embeddings/which-distance-function-should-i-use" target="_blank" rel="noopener noreferrer">距离</a>衡量它们的相关性。小距离表示高相关性，大距离表示低相关性。</p><p>访问我们的<a href="https://openai.com/api/pricing/" target="_blank" rel="noopener noreferrer">定价页面</a>以了解嵌入定价。请求根据发送的<a href="https://platform.openai.com/docs/api-reference/embeddings/create#embeddings/create-input" target="_blank" rel="noopener noreferrer">输入</a>中的<a href="https://platform.openai.com/tokenizer" target="_blank" rel="noopener noreferrer">标记</a>数量计费。</p><blockquote><p><strong>要查看嵌入的实际效果，请查看我们的代码示例</strong></p><ul><li>分类</li><li>主题聚类</li><li>搜索</li><li>建议</li></ul><p><a href="https://platform.openai.com/docs/guides/embeddings/use-cases" target="_blank" rel="noopener noreferrer">浏览示例</a></p></blockquote><h3 id="如何获得嵌入" tabindex="-1"><a class="header-anchor" href="#如何获得嵌入"><span>如何获得嵌入</span></a></h3><p>要获得嵌入，请将您的文本字符串连同选择的嵌入模型 ID（例如， ）发送到<a href="https://platform.openai.com/docs/api-reference/embeddings" target="_blank" rel="noopener noreferrer">嵌入 API 端点</a><code>text-embedding-ada-002</code>。响应将包含一个嵌入，您可以提取、保存和使用它。</p><p>示例请求：</p><div class="language-bash line-numbers-mode" data-highlighter="prismjs" data-ext="sh" data-title="sh"><pre><code><span class="line"><span class="token function">curl</span> https://api.openai.com/v1/embeddings <span class="token punctuation">\</span></span>
<span class="line">  <span class="token parameter variable">-H</span> <span class="token string">&quot;Content-Type: application/json&quot;</span> <span class="token punctuation">\</span></span>
<span class="line">  <span class="token parameter variable">-H</span> <span class="token string">&quot;Authorization: Bearer <span class="token variable">$OPENAI_API_KEY</span>&quot;</span> <span class="token punctuation">\</span></span>
<span class="line">  <span class="token parameter variable">-d</span> <span class="token string">&#39;{&quot;input&quot;: &quot;Your text string goes here&quot;,</span>
<span class="line">       &quot;model&quot;:&quot;text-embedding-ada-002&quot;}&#39;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>示例响应：</p><div class="language-json line-numbers-mode" data-highlighter="prismjs" data-ext="json" data-title="json"><pre><code><span class="line"><span class="token punctuation">{</span></span>
<span class="line">  <span class="token property">&quot;data&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span></span>
<span class="line">    <span class="token punctuation">{</span></span>
<span class="line">      <span class="token property">&quot;embedding&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span></span>
<span class="line">        <span class="token number">-0.006929283495992422</span><span class="token punctuation">,</span></span>
<span class="line">        <span class="token number">-0.005336422007530928</span><span class="token punctuation">,</span></span>
<span class="line">        ...</span>
<span class="line">        <span class="token number">-4.547132266452536e-05</span><span class="token punctuation">,</span></span>
<span class="line">        <span class="token number">-0.024047505110502243</span></span>
<span class="line">      <span class="token punctuation">]</span><span class="token punctuation">,</span></span>
<span class="line">      <span class="token property">&quot;index&quot;</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span></span>
<span class="line">      <span class="token property">&quot;object&quot;</span><span class="token operator">:</span> <span class="token string">&quot;embedding&quot;</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line">  <span class="token punctuation">]</span><span class="token punctuation">,</span></span>
<span class="line">  <span class="token property">&quot;model&quot;</span><span class="token operator">:</span> <span class="token string">&quot;text-embedding-ada-002&quot;</span><span class="token punctuation">,</span></span>
<span class="line">  <span class="token property">&quot;object&quot;</span><span class="token operator">:</span> <span class="token string">&quot;list&quot;</span><span class="token punctuation">,</span></span>
<span class="line">  <span class="token property">&quot;usage&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token property">&quot;prompt_tokens&quot;</span><span class="token operator">:</span> <span class="token number">5</span><span class="token punctuation">,</span></span>
<span class="line">    <span class="token property">&quot;total_tokens&quot;</span><span class="token operator">:</span> <span class="token number">5</span></span>
<span class="line">  <span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><a href="https://github.com/openai/openai-cookbook/" target="_blank" rel="noopener noreferrer">在OpenAI Cookbook</a>中查看更多 Python 代码示例。</p><p>使用 OpenAI 嵌入时，请牢记它们的<a href="https://platform.openai.com/docs/guides/embeddings/limitations-risks" target="_blank" rel="noopener noreferrer">局限性和风险</a>。</p><h3 id="嵌入模型" tabindex="-1"><a class="header-anchor" href="#嵌入模型"><span>嵌入模型</span></a></h3><p>OpenAI 提供了一个第二代嵌入模型（<code>-002</code>在模型 ID 中表示）和 16 个第一代模型（<code>-001</code>在模型 ID 中表示）。</p><p>我们建议对几乎所有用例使用 text-embedding-ada-002。它更好、更便宜、更易于使用。阅读<a href="https://openai.com/blog/new-and-improved-embedding-model" target="_blank" rel="noopener noreferrer">博文公告</a>。</p><table><thead><tr><th style="text-align:left;">模型生成</th><th style="text-align:left;">分词器</th><th style="text-align:left;">最大输入令牌</th><th style="text-align:left;">知识截断</th></tr></thead><tbody><tr><td style="text-align:left;">V2</td><td style="text-align:left;">cl100k_base</td><td style="text-align:left;">8191</td><td style="text-align:left;">2021 年 9 月</td></tr><tr><td style="text-align:left;">V1</td><td style="text-align:left;">GPT-2/GPT-3</td><td style="text-align:left;">2046</td><td style="text-align:left;">2020 年 8 月</td></tr></tbody></table><p>使用量按输入令牌定价，每 1000 个令牌 0.0004 美元，或每美元约 3,000 页（假设每页约 800 个令牌）：</p><table><thead><tr><th style="text-align:left;">模型</th><th style="text-align:left;">每美元粗页</th><th style="text-align:left;"><a href="https://paperswithcode.com/sota/zero-shot-text-search-on-beir" target="_blank" rel="noopener noreferrer">BEIR</a>搜索评估的示例性能</th></tr></thead><tbody><tr><td style="text-align:left;">text-embedding-ada-002</td><td style="text-align:left;">3000</td><td style="text-align:left;">53.9</td></tr><tr><td style="text-align:left;">*-davinci-*-001</td><td style="text-align:left;">6个</td><td style="text-align:left;">52.8</td></tr><tr><td style="text-align:left;">*-curie-*-001</td><td style="text-align:left;">60</td><td style="text-align:left;">50.9</td></tr><tr><td style="text-align:left;">*-babbage-*-001</td><td style="text-align:left;">240</td><td style="text-align:left;">50.4</td></tr><tr><td style="text-align:left;">*-ada-*-001</td><td style="text-align:left;">300</td><td style="text-align:left;">49.0</td></tr></tbody></table><h3 id="二代模型" tabindex="-1"><a class="header-anchor" href="#二代模型"><span>二代模型</span></a></h3><table><thead><tr><th style="text-align:left;">型号名称</th><th style="text-align:left;">分词器</th><th style="text-align:left;">最大输入令牌</th><th style="text-align:left;">输出尺寸</th></tr></thead><tbody><tr><td style="text-align:left;">文本嵌入-ada-002</td><td style="text-align:left;">cl100k_base</td><td style="text-align:left;">8191</td><td style="text-align:left;">1536</td></tr></tbody></table><details class="hint-container details"><summary>第一代模型（不推荐）</summary><p>所有第一代模型（以 -001 结尾的模型）都使用<a href="https://platform.openai.com/tokenizer" target="_blank" rel="noopener noreferrer">GPT-3 分词</a>器，最大输入为 2046 个分词。</p><p>第一代嵌入由五个不同的模型系列生成，这些模型系列针对三个不同的任务进行了调整：文本搜索、文本相似性和代码搜索。搜索模型成对出现：一个用于短查询，一个用于长文档。每个系列最多包括四种质量和速度不同的型号：</p><table><thead><tr><th style="text-align:left;">模型</th><th style="text-align:left;">输出尺寸</th></tr></thead><tbody><tr><td style="text-align:left;">Ada</td><td style="text-align:left;">1024</td></tr><tr><td style="text-align:left;">Babbage</td><td style="text-align:left;">2048</td></tr><tr><td style="text-align:left;">Curie</td><td style="text-align:left;">4096</td></tr><tr><td style="text-align:left;">Davinci</td><td style="text-align:left;">12288</td></tr></tbody></table><p>Davinci 是最有能力的，但比其他型号更慢且更昂贵。Ada 的能力最差，但速度更快，成本更低。</p><h4 id="相似性嵌入" tabindex="-1"><a class="header-anchor" href="#相似性嵌入"><span>相似性嵌入</span></a></h4><p>相似性模型最擅长捕捉文本片段之间的语义相似性。</p><table><thead><tr><th style="text-align:left;">用例</th><th style="text-align:left;">可用型号</th></tr></thead><tbody><tr><td style="text-align:left;">聚类、回归、异常检测、可视化</td><td style="text-align:left;"><code>text-similarity-ada-001</code><br> <code>text-similarity-babbage-001</code><br> <code>text-similarity-curie-001</code> <br><code>text-similarity-davinci-001</code></td></tr></tbody></table><h4 id="文本搜索嵌入" tabindex="-1"><a class="header-anchor" href="#文本搜索嵌入"><span>文本搜索嵌入</span></a></h4><p>文本搜索模型有助于衡量哪些长文档与短搜索查询最相关。使用了两种模型：一种用于嵌入搜索查询，一种用于嵌入要排名的文档。最接近查询嵌入的文档嵌入应该是最相关的。</p><table><thead><tr><th style="text-align:left;">用例</th><th style="text-align:left;">可用型号</th></tr></thead><tbody><tr><td style="text-align:left;">搜索、上下文相关性、信息检索</td><td style="text-align:left;"><code>text-search-ada-doc-001</code> <br> <code>text-search-ada-query-001</code> <br> <code>text-search-babbage-doc-001</code> <br> <code>text-search-babbage-query-001</code> <br> <code>text-search-curie-doc-001</code> <br> <code>text-search-curie-query-001</code> <br> <code>text-search-davinci-doc-001</code> <br> <code>text-search-davinci-query-001</code></td></tr></tbody></table><h4 id="代码搜索嵌入" tabindex="-1"><a class="header-anchor" href="#代码搜索嵌入"><span>代码搜索嵌入</span></a></h4><p>与搜索嵌入类似，有两种类型：一种用于嵌入自然语言搜索查询，一种用于嵌入要检索的代码片段。</p><table><thead><tr><th style="text-align:left;">用例</th><th style="text-align:left;">可用型号</th></tr></thead><tbody><tr><td style="text-align:left;">代码搜索和相关性</td><td style="text-align:left;"><code>code-search-ada-code-001</code> <br> <code>code-search-ada-text-001</code> <br> <code>code-search-babbage-code-001</code> <br> <code>code-search-babbage-text-001</code></td></tr></tbody></table><div class="hint-container warning"><p class="hint-container-title">提示</p><p>对于<code>-001</code>文本嵌入（不是<code>-002</code>, 和代码嵌入），我们建议将<code>\n</code>输入中的换行符 ( ) 替换为单个空格，因为当存在换行符时我们已经看到更糟糕的结果。</p></div></details><h2 id="用例" tabindex="-1"><a class="header-anchor" href="#用例"><span>用例</span></a></h2><p>在这里，我们展示了一些有代表性的用例。我们将在以下示例中使用<a href="https://www.kaggle.com/snap/amazon-fine-food-reviews" target="_blank" rel="noopener noreferrer">亚马逊美食评论数据集。</a></p><h3 id="获取嵌入" tabindex="-1"><a class="header-anchor" href="#获取嵌入"><span>获取嵌入</span></a></h3><p>该数据集包含截至 2012 年 10 月亚马逊用户留下的总共 568,454 条食品评论。我们将使用 1,000 条最新评论的子集用于说明目的。评论是英文的，往往是正面的或负面的。每条评论都有一个 ProductId、UserId、Score、评论标题（摘要）和评论正文（文本）。例如：</p><table><thead><tr><th style="text-align:left;">产品编号</th><th style="text-align:left;">用户身份</th><th style="text-align:left;">分数</th><th style="text-align:left;">概括</th><th style="text-align:left;">文本</th></tr></thead><tbody><tr><td style="text-align:left;">B001E4KFG0</td><td style="text-align:left;">A3SGXH7AUHU8GW</td><td style="text-align:left;">5个</td><td style="text-align:left;">优质狗粮</td><td style="text-align:left;">我买了好几个活力罐头...</td></tr><tr><td style="text-align:left;">B00813GRG4</td><td style="text-align:left;">A1D87F6ZCVE5NK</td><td style="text-align:left;">1个</td><td style="text-align:left;">不像宣传的那样</td><td style="text-align:left;">产品到达时标记为 Jumbo Salted Peanut...</td></tr></tbody></table><p>我们会将评论摘要和评论文本合并为一个组合文本。该模型将对该组合文本进行编码并输出单个向量嵌入。</p><p><a href="https://github.com/openai/openai-cookbook/blob/main/examples/Obtain_dataset.ipynb" target="_blank" rel="noopener noreferrer">获取数据集.ipynb</a></p><div class="language-python line-numbers-mode" data-highlighter="prismjs" data-ext="py" data-title="py"><pre><code><span class="line"><span class="token keyword">def</span> <span class="token function">get_embedding</span><span class="token punctuation">(</span>text<span class="token punctuation">,</span> model<span class="token operator">=</span><span class="token string">&quot;text-embedding-ada-002&quot;</span><span class="token punctuation">)</span><span class="token punctuation">:</span></span>
<span class="line">   text <span class="token operator">=</span> text<span class="token punctuation">.</span>replace<span class="token punctuation">(</span><span class="token string">&quot;\n&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot; &quot;</span><span class="token punctuation">)</span></span>
<span class="line">   <span class="token keyword">return</span> openai<span class="token punctuation">.</span>Embedding<span class="token punctuation">.</span>create<span class="token punctuation">(</span><span class="token builtin">input</span> <span class="token operator">=</span> <span class="token punctuation">[</span>text<span class="token punctuation">]</span><span class="token punctuation">,</span> model<span class="token operator">=</span>model<span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token string">&#39;data&#39;</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token string">&#39;embedding&#39;</span><span class="token punctuation">]</span></span>
<span class="line"> </span>
<span class="line">df<span class="token punctuation">[</span><span class="token string">&#39;ada_embedding&#39;</span><span class="token punctuation">]</span> <span class="token operator">=</span> df<span class="token punctuation">.</span>combined<span class="token punctuation">.</span><span class="token builtin">apply</span><span class="token punctuation">(</span><span class="token keyword">lambda</span> x<span class="token punctuation">:</span> get_embedding<span class="token punctuation">(</span>x<span class="token punctuation">,</span> model<span class="token operator">=</span><span class="token string">&#39;text-embedding-ada-002&#39;</span><span class="token punctuation">)</span><span class="token punctuation">)</span></span>
<span class="line">df<span class="token punctuation">.</span>to_csv<span class="token punctuation">(</span><span class="token string">&#39;output/embedded_1k_reviews.csv&#39;</span><span class="token punctuation">,</span> index<span class="token operator">=</span><span class="token boolean">False</span><span class="token punctuation">)</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>要从保存的文件中加载数据，您可以运行以下命令：</p><div class="language-python line-numbers-mode" data-highlighter="prismjs" data-ext="py" data-title="py"><pre><code><span class="line"><span class="token keyword">import</span> pandas <span class="token keyword">as</span> pd</span>
<span class="line"> </span>
<span class="line">df <span class="token operator">=</span> pd<span class="token punctuation">.</span>read_csv<span class="token punctuation">(</span><span class="token string">&#39;output/embedded_1k_reviews.csv&#39;</span><span class="token punctuation">)</span></span>
<span class="line">df<span class="token punctuation">[</span><span class="token string">&#39;ada_embedding&#39;</span><span class="token punctuation">]</span> <span class="token operator">=</span> df<span class="token punctuation">.</span>ada_embedding<span class="token punctuation">.</span><span class="token builtin">apply</span><span class="token punctuation">(</span><span class="token builtin">eval</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token builtin">apply</span><span class="token punctuation">(</span>np<span class="token punctuation">.</span>array<span class="token punctuation">)</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><details class="hint-container details"><summary>二维数据可视化</summary><p><a href="https://github.com/openai/openai-cookbook/blob/main/examples/Visualizing_embeddings_in_2D.ipynb" target="_blank" rel="noopener noreferrer">Visualizing_embeddings_in_2D.ipynb</a></p><p>嵌入的大小随底层模型的复杂性而变化。为了可视化这种高维数据，我们使用 t-SNE 算法将数据转换为二维。</p><p>我们根据评论者给出的星级评分为各个评论着色：</p><ul><li>1星：红色</li><li>2星：深橙色</li><li>3星：黄金</li><li>4星：绿松石</li><li>5星：深绿色</li></ul><img src="https://cdn.openai.com/API/docs/images/embeddings-tsne.png" alt="使用 t-SNE 以语言可视化的亚马逊评分" style="zoom:50%;"><p>可视化似乎产生了大约 3 个集群，其中一个集群的评论大多是负面的。</p><div class="language-python line-numbers-mode" data-highlighter="prismjs" data-ext="py" data-title="py"><pre><code><span class="line"><span class="token keyword">import</span> pandas <span class="token keyword">as</span> pd</span>
<span class="line"><span class="token keyword">from</span> sklearn<span class="token punctuation">.</span>manifold <span class="token keyword">import</span> TSNE</span>
<span class="line"><span class="token keyword">import</span> matplotlib<span class="token punctuation">.</span>pyplot <span class="token keyword">as</span> plt</span>
<span class="line"><span class="token keyword">import</span> matplotlib</span>
<span class="line"> </span>
<span class="line">df <span class="token operator">=</span> pd<span class="token punctuation">.</span>read_csv<span class="token punctuation">(</span><span class="token string">&#39;output/embedded_1k_reviews.csv&#39;</span><span class="token punctuation">)</span></span>
<span class="line">matrix <span class="token operator">=</span> df<span class="token punctuation">.</span>ada_embedding<span class="token punctuation">.</span><span class="token builtin">apply</span><span class="token punctuation">(</span><span class="token builtin">eval</span><span class="token punctuation">)</span><span class="token punctuation">.</span>to_list<span class="token punctuation">(</span><span class="token punctuation">)</span></span>
<span class="line"> </span>
<span class="line"><span class="token comment"># Create a t-SNE model and transform the data</span></span>
<span class="line">tsne <span class="token operator">=</span> TSNE<span class="token punctuation">(</span>n_components<span class="token operator">=</span><span class="token number">2</span><span class="token punctuation">,</span> perplexity<span class="token operator">=</span><span class="token number">15</span><span class="token punctuation">,</span> random_state<span class="token operator">=</span><span class="token number">42</span><span class="token punctuation">,</span> init<span class="token operator">=</span><span class="token string">&#39;random&#39;</span><span class="token punctuation">,</span> learning_rate<span class="token operator">=</span><span class="token number">200</span><span class="token punctuation">)</span></span>
<span class="line">vis_dims <span class="token operator">=</span> tsne<span class="token punctuation">.</span>fit_transform<span class="token punctuation">(</span>matrix<span class="token punctuation">)</span></span>
<span class="line"> </span>
<span class="line">colors <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">&quot;red&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;darkorange&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;gold&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;turquiose&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;darkgreen&quot;</span><span class="token punctuation">]</span></span>
<span class="line">x <span class="token operator">=</span> <span class="token punctuation">[</span>x <span class="token keyword">for</span> x<span class="token punctuation">,</span>y <span class="token keyword">in</span> vis_dims<span class="token punctuation">]</span></span>
<span class="line">y <span class="token operator">=</span> <span class="token punctuation">[</span>y <span class="token keyword">for</span> x<span class="token punctuation">,</span>y <span class="token keyword">in</span> vis_dims<span class="token punctuation">]</span></span>
<span class="line">color_indices <span class="token operator">=</span> df<span class="token punctuation">.</span>Score<span class="token punctuation">.</span>values <span class="token operator">-</span> <span class="token number">1</span></span>
<span class="line"> </span>
<span class="line">colormap <span class="token operator">=</span> matplotlib<span class="token punctuation">.</span>colors<span class="token punctuation">.</span>ListedColormap<span class="token punctuation">(</span>colors<span class="token punctuation">)</span></span>
<span class="line">plt<span class="token punctuation">.</span>scatter<span class="token punctuation">(</span>x<span class="token punctuation">,</span> y<span class="token punctuation">,</span> c<span class="token operator">=</span>color_indices<span class="token punctuation">,</span> cmap<span class="token operator">=</span>colormap<span class="token punctuation">,</span> alpha<span class="token operator">=</span><span class="token number">0.3</span><span class="token punctuation">)</span></span>
<span class="line">plt<span class="token punctuation">.</span>title<span class="token punctuation">(</span><span class="token string">&quot;Amazon ratings visualized in language using t-SNE&quot;</span><span class="token punctuation">)</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></details><details class="hint-container details"><summary>嵌入作为 ML 算法的文本特征编码器</summary><p><a href="https://github.com/openai/openai-cookbook/blob/main/examples/Regression_using_embeddings.ipynb" target="_blank" rel="noopener noreferrer">回归_使用_embeddings.ipynb</a></p><p>嵌入可以用作机器学习模型中的通用自由文本特征编码器。如果一些相关输入是自由文本，则合并嵌入将提高任何机器学习模型的性能。嵌入也可以用作 ML 模型中的分类特征编码器。如果分类变量的名称有意义且数量众多，例如职位名称，那么这会增加最大的价值。对于此任务，相似性嵌入通常比搜索嵌入表现更好。</p><p>我们观察到，通常嵌入表示非常丰富且信息密集。例如，使用 SVD 或 PCA 降低输入的维度，即使降低 10%，通常也会导致特定任务的下游性能变差。</p><p>此代码将数据拆分为训练集和测试集，将由以下两个用例使用，即回归和分类。</p><div class="language-python line-numbers-mode" data-highlighter="prismjs" data-ext="py" data-title="py"><pre><code><span class="line"></span>
<span class="line"><span class="token keyword">from</span> sklearn<span class="token punctuation">.</span>model_selection <span class="token keyword">import</span> train_test_split</span>
<span class="line"> </span>
<span class="line">X_train<span class="token punctuation">,</span> X_test<span class="token punctuation">,</span> y_train<span class="token punctuation">,</span> y_test <span class="token operator">=</span> train_test_split<span class="token punctuation">(</span></span>
<span class="line">    <span class="token builtin">list</span><span class="token punctuation">(</span>df<span class="token punctuation">.</span>ada_embedding<span class="token punctuation">.</span>values<span class="token punctuation">)</span><span class="token punctuation">,</span></span>
<span class="line">    df<span class="token punctuation">.</span>Score<span class="token punctuation">,</span></span>
<span class="line">    test_size <span class="token operator">=</span> <span class="token number">0.2</span><span class="token punctuation">,</span></span>
<span class="line">    random_state<span class="token operator">=</span><span class="token number">42</span></span>
<span class="line"><span class="token punctuation">)</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></details><details class="hint-container details"><summary>使用嵌入特征进行回归</summary><p>嵌入提供了一种预测数值的优雅方法。在此示例中，我们根据评论文本预测评论者的星级。因为嵌入中包含的语义信息很高，所以即使评论很少，预测也不错。</p><p>我们假设分数是 1 到 5 之间的连续变量，并允许算法预测任何浮点值。ML 算法最小化预测值与真实分数的距离，并实现 0.39 的平均绝对误差，这意味着平均预测偏差不到半星。</p><div class="language-python line-numbers-mode" data-highlighter="prismjs" data-ext="py" data-title="py"><pre><code><span class="line"></span>
<span class="line"><span class="token keyword">from</span> sklearn<span class="token punctuation">.</span>ensemble <span class="token keyword">import</span> RandomForestRegressor</span>
<span class="line"> </span>
<span class="line">rfr <span class="token operator">=</span> RandomForestRegressor<span class="token punctuation">(</span>n_estimators<span class="token operator">=</span><span class="token number">100</span><span class="token punctuation">)</span></span>
<span class="line">rfr<span class="token punctuation">.</span>fit<span class="token punctuation">(</span>X_train<span class="token punctuation">,</span> y_train<span class="token punctuation">)</span></span>
<span class="line">preds <span class="token operator">=</span> rfr<span class="token punctuation">.</span>predict<span class="token punctuation">(</span>X_test<span class="token punctuation">)</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></details><details class="hint-container details"><summary>使用嵌入特征进行分类</summary><p><a href="https://github.com/openai/openai-cookbook/blob/main/examples/Classification_using_embeddings.ipynb" target="_blank" rel="noopener noreferrer">Classification_using_embeddings.ipynb</a></p><p>这一次，我们不再让算法预测 1 到 5 之间的任何值，而是尝试将评论的确切星数分类为 5 个桶，范围从 1 到 5 星。</p><p>训练后，该模型学习预测 1 星和 5 星评论比更细微的评论（2-4 星）更好，这可能是由于更极端的情绪表达。</p><div class="language-python line-numbers-mode" data-highlighter="prismjs" data-ext="py" data-title="py"><pre><code><span class="line"></span>
<span class="line"><span class="token keyword">from</span> sklearn<span class="token punctuation">.</span>ensemble <span class="token keyword">import</span> RandomForestClassifier</span>
<span class="line"><span class="token keyword">from</span> sklearn<span class="token punctuation">.</span>metrics <span class="token keyword">import</span> classification_report<span class="token punctuation">,</span> accuracy_score</span>
<span class="line"> </span>
<span class="line">clf <span class="token operator">=</span> RandomForestClassifier<span class="token punctuation">(</span>n_estimators<span class="token operator">=</span><span class="token number">100</span><span class="token punctuation">)</span></span>
<span class="line">clf<span class="token punctuation">.</span>fit<span class="token punctuation">(</span>X_train<span class="token punctuation">,</span> y_train<span class="token punctuation">)</span></span>
<span class="line">preds <span class="token operator">=</span> clf<span class="token punctuation">.</span>predict<span class="token punctuation">(</span>X_test<span class="token punctuation">)</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></details><details class="hint-container details"><summary>零样本分类</summary><p><a href="https://github.com/openai/openai-cookbook/blob/main/examples/Zero-shot_classification_with_embeddings.ipynb" target="_blank" rel="noopener noreferrer">零射分类_with_embeddings.ipynb</a></p><p>我们可以在没有任何标记训练数据的情况下使用嵌入进行零镜头分类。对于每个类，我们嵌入类名或类的简短描述。为了以零样本方式对一些新文本进行分类，我们将其嵌入与所有类嵌入进行比较，并预测具有最高相似度的类。</p><div class="language-python line-numbers-mode" data-highlighter="prismjs" data-ext="py" data-title="py"><pre><code><span class="line"></span>
<span class="line"><span class="token keyword">from</span> openai<span class="token punctuation">.</span>embeddings_utils <span class="token keyword">import</span> cosine_similarity<span class="token punctuation">,</span> get_embedding</span>
<span class="line"> </span>
<span class="line">df<span class="token operator">=</span> df<span class="token punctuation">[</span>df<span class="token punctuation">.</span>Score<span class="token operator">!=</span><span class="token number">3</span><span class="token punctuation">]</span></span>
<span class="line">df<span class="token punctuation">[</span><span class="token string">&#39;sentiment&#39;</span><span class="token punctuation">]</span> <span class="token operator">=</span> df<span class="token punctuation">.</span>Score<span class="token punctuation">.</span>replace<span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token number">1</span><span class="token punctuation">:</span><span class="token string">&#39;negative&#39;</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">:</span><span class="token string">&#39;negative&#39;</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">:</span><span class="token string">&#39;positive&#39;</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">:</span><span class="token string">&#39;positive&#39;</span><span class="token punctuation">}</span><span class="token punctuation">)</span></span>
<span class="line"> </span>
<span class="line">labels <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">&#39;negative&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;positive&#39;</span><span class="token punctuation">]</span></span>
<span class="line">label_embeddings <span class="token operator">=</span> <span class="token punctuation">[</span>get_embedding<span class="token punctuation">(</span>label<span class="token punctuation">,</span> model<span class="token operator">=</span>model<span class="token punctuation">)</span> <span class="token keyword">for</span> label <span class="token keyword">in</span> labels<span class="token punctuation">]</span></span>
<span class="line"> </span>
<span class="line"><span class="token keyword">def</span> <span class="token function">label_score</span><span class="token punctuation">(</span>review_embedding<span class="token punctuation">,</span> label_embeddings<span class="token punctuation">)</span><span class="token punctuation">:</span></span>
<span class="line">   <span class="token keyword">return</span> cosine_similarity<span class="token punctuation">(</span>review_embedding<span class="token punctuation">,</span> label_embeddings<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token operator">-</span> cosine_similarity<span class="token punctuation">(</span>review_embedding<span class="token punctuation">,</span> label_embeddings<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span></span>
<span class="line"> </span>
<span class="line">prediction <span class="token operator">=</span> <span class="token string">&#39;positive&#39;</span> <span class="token keyword">if</span> label_score<span class="token punctuation">(</span><span class="token string">&#39;Sample Review&#39;</span><span class="token punctuation">,</span> label_embeddings<span class="token punctuation">)</span> <span class="token operator">&gt;</span> <span class="token number">0</span> <span class="token keyword">else</span> <span class="token string">&#39;negative&#39;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></details><details class="hint-container details"><summary>获取用于冷启动推荐的用户和产品嵌入</summary><p><a href="https://github.com/openai/openai-cookbook/blob/main/examples/User_and_product_embeddings.ipynb" target="_blank" rel="noopener noreferrer">User_and_product_embeddings.ipynb</a></p><p>我们可以通过对他们的所有评论进行平均来获得用户嵌入。同样，我们可以通过对有关该产品的所有评论进行平均来获得产品嵌入。为了展示这种方法的实用性，我们使用 50k 评论的子集来覆盖每个用户和每个产品的更多评论。</p><p>我们在单独的测试集上评估这些嵌入的有用性，我们将用户和产品嵌入的相似性绘制为评分的函数。有趣的是，基于这种方法，甚至在用户收到产品之前，我们就可以比随机预测更好地预测他们是否喜欢该产品。</p><img src="https://cdn.openai.com/API/docs/images/embeddings-boxplot.png" alt="按得分分组的箱线图" style="zoom:50%;"><div class="language-python line-numbers-mode" data-highlighter="prismjs" data-ext="py" data-title="py"><pre><code><span class="line">user_embeddings <span class="token operator">=</span> df<span class="token punctuation">.</span>groupby<span class="token punctuation">(</span><span class="token string">&#39;UserId&#39;</span><span class="token punctuation">)</span><span class="token punctuation">.</span>ada_embedding<span class="token punctuation">.</span><span class="token builtin">apply</span><span class="token punctuation">(</span>np<span class="token punctuation">.</span>mean<span class="token punctuation">)</span></span>
<span class="line">prod_embeddings <span class="token operator">=</span> df<span class="token punctuation">.</span>groupby<span class="token punctuation">(</span><span class="token string">&#39;ProductId&#39;</span><span class="token punctuation">)</span><span class="token punctuation">.</span>ada_embedding<span class="token punctuation">.</span><span class="token builtin">apply</span><span class="token punctuation">(</span>np<span class="token punctuation">.</span>mean<span class="token punctuation">)</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div></details><details class="hint-container details"><summary>聚类</summary><p><a href="https://github.com/openai/openai-cookbook/blob/main/examples/Clustering.ipynb" target="_blank" rel="noopener noreferrer">聚类.ipynb</a></p><p>聚类是理解大量文本数据的一种方式。嵌入对于这项任务很有用，因为它们提供了每个文本的语义上有意义的向量表示。因此，以一种无监督的方式，聚类将揭示我们数据集中隐藏的分组。</p><p>在这个例子中，我们发现了四个不同的集群：一个专注于狗食，一个专注于负面评论，两个专注于正面评论。</p><img src="https://cdn.openai.com/API/docs/images/embeddings-cluster.png" alt="使用 t-SNE 以 2d 语言可视化识别的集群" style="zoom:50%;"><div class="language-python line-numbers-mode" data-highlighter="prismjs" data-ext="py" data-title="py"><pre><code><span class="line"></span>
<span class="line"><span class="token keyword">import</span> numpy <span class="token keyword">as</span> np</span>
<span class="line"><span class="token keyword">from</span> sklearn<span class="token punctuation">.</span>cluster <span class="token keyword">import</span> KMeans</span>
<span class="line"> </span>
<span class="line">matrix <span class="token operator">=</span> np<span class="token punctuation">.</span>vstack<span class="token punctuation">(</span>df<span class="token punctuation">.</span>ada_embedding<span class="token punctuation">.</span>values<span class="token punctuation">)</span></span>
<span class="line">n_clusters <span class="token operator">=</span> <span class="token number">4</span></span>
<span class="line"> </span>
<span class="line">kmeans <span class="token operator">=</span> KMeans<span class="token punctuation">(</span>n_clusters <span class="token operator">=</span> n_clusters<span class="token punctuation">,</span> init<span class="token operator">=</span><span class="token string">&#39;k-means++&#39;</span><span class="token punctuation">,</span> random_state<span class="token operator">=</span><span class="token number">42</span><span class="token punctuation">)</span></span>
<span class="line">kmeans<span class="token punctuation">.</span>fit<span class="token punctuation">(</span>matrix<span class="token punctuation">)</span></span>
<span class="line">df<span class="token punctuation">[</span><span class="token string">&#39;Cluster&#39;</span><span class="token punctuation">]</span> <span class="token operator">=</span> kmeans<span class="token punctuation">.</span>labels_</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></details><details class="hint-container details"><summary>使用嵌入的文本搜索</summary><p><a href="https://github.com/openai/openai-cookbook/blob/main/examples/Semantic_text_search_using_embeddings.ipynb" target="_blank" rel="noopener noreferrer">Semantic_text_search_using_embeddings.ipynb</a></p><p>为了检索最相关的文档，我们使用查询的嵌入向量与每个文档之间的余弦相似度，并返回得分最高的文档。</p><div class="language-python line-numbers-mode" data-highlighter="prismjs" data-ext="py" data-title="py"><pre><code><span class="line"></span>
<span class="line"><span class="token keyword">from</span> openai<span class="token punctuation">.</span>embeddings_utils <span class="token keyword">import</span> get_embedding<span class="token punctuation">,</span> cosine_similarity</span>
<span class="line"> </span>
<span class="line"><span class="token keyword">def</span> <span class="token function">search_reviews</span><span class="token punctuation">(</span>df<span class="token punctuation">,</span> product_description<span class="token punctuation">,</span> n<span class="token operator">=</span><span class="token number">3</span><span class="token punctuation">,</span> pprint<span class="token operator">=</span><span class="token boolean">True</span><span class="token punctuation">)</span><span class="token punctuation">:</span></span>
<span class="line">   embedding <span class="token operator">=</span> get_embedding<span class="token punctuation">(</span>product_description<span class="token punctuation">,</span> model<span class="token operator">=</span><span class="token string">&#39;text-embedding-ada-002&#39;</span><span class="token punctuation">)</span></span>
<span class="line">   df<span class="token punctuation">[</span><span class="token string">&#39;similarities&#39;</span><span class="token punctuation">]</span> <span class="token operator">=</span> df<span class="token punctuation">.</span>ada_embedding<span class="token punctuation">.</span><span class="token builtin">apply</span><span class="token punctuation">(</span><span class="token keyword">lambda</span> x<span class="token punctuation">:</span> cosine_similarity<span class="token punctuation">(</span>x<span class="token punctuation">,</span> embedding<span class="token punctuation">)</span><span class="token punctuation">)</span></span>
<span class="line">   res <span class="token operator">=</span> df<span class="token punctuation">.</span>sort_values<span class="token punctuation">(</span><span class="token string">&#39;similarities&#39;</span><span class="token punctuation">,</span> ascending<span class="token operator">=</span><span class="token boolean">False</span><span class="token punctuation">)</span><span class="token punctuation">.</span>head<span class="token punctuation">(</span>n<span class="token punctuation">)</span></span>
<span class="line">   <span class="token keyword">return</span> res</span>
<span class="line"> </span>
<span class="line">res <span class="token operator">=</span> search_reviews<span class="token punctuation">(</span>df<span class="token punctuation">,</span> <span class="token string">&#39;delicious beans&#39;</span><span class="token punctuation">,</span> n<span class="token operator">=</span><span class="token number">3</span><span class="token punctuation">)</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></details><details class="hint-container details"><summary>使用嵌入的代码搜索</summary><p><a href="https://github.com/openai/openai-cookbook/blob/main/examples/Code_search.ipynb" target="_blank" rel="noopener noreferrer">代码搜索.ipynb</a></p><p>代码搜索的工作方式类似于基于嵌入的文本搜索。我们提供了一种从给定存储库中的所有 Python 文件中提取 Python 函数的方法。然后每个函数都由<code>text-embedding-ada-002</code>模型索引。</p><p>为了执行代码搜索，我们使用相同的模型将查询嵌入到自然语言中。然后我们计算结果查询嵌入和每个函数嵌入之间的余弦相似度。最高的余弦相似度结果是最相关的。</p><div class="language-python line-numbers-mode" data-highlighter="prismjs" data-ext="py" data-title="py"><pre><code><span class="line"></span>
<span class="line"><span class="token keyword">from</span> openai<span class="token punctuation">.</span>embeddings_utils <span class="token keyword">import</span> get_embedding<span class="token punctuation">,</span> cosine_similarity</span>
<span class="line"> </span>
<span class="line">df<span class="token punctuation">[</span><span class="token string">&#39;code_embedding&#39;</span><span class="token punctuation">]</span> <span class="token operator">=</span> df<span class="token punctuation">[</span><span class="token string">&#39;code&#39;</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token builtin">apply</span><span class="token punctuation">(</span><span class="token keyword">lambda</span> x<span class="token punctuation">:</span> get_embedding<span class="token punctuation">(</span>x<span class="token punctuation">,</span> model<span class="token operator">=</span><span class="token string">&#39;text-embedding-ada-002&#39;</span><span class="token punctuation">)</span><span class="token punctuation">)</span></span>
<span class="line"> </span>
<span class="line"><span class="token keyword">def</span> <span class="token function">search_functions</span><span class="token punctuation">(</span>df<span class="token punctuation">,</span> code_query<span class="token punctuation">,</span> n<span class="token operator">=</span><span class="token number">3</span><span class="token punctuation">,</span> pprint<span class="token operator">=</span><span class="token boolean">True</span><span class="token punctuation">,</span> n_lines<span class="token operator">=</span><span class="token number">7</span><span class="token punctuation">)</span><span class="token punctuation">:</span></span>
<span class="line">   embedding <span class="token operator">=</span> get_embedding<span class="token punctuation">(</span>code_query<span class="token punctuation">,</span> model<span class="token operator">=</span><span class="token string">&#39;text-embedding-ada-002&#39;</span><span class="token punctuation">)</span></span>
<span class="line">   df<span class="token punctuation">[</span><span class="token string">&#39;similarities&#39;</span><span class="token punctuation">]</span> <span class="token operator">=</span> df<span class="token punctuation">.</span>code_embedding<span class="token punctuation">.</span><span class="token builtin">apply</span><span class="token punctuation">(</span><span class="token keyword">lambda</span> x<span class="token punctuation">:</span> cosine_similarity<span class="token punctuation">(</span>x<span class="token punctuation">,</span> embedding<span class="token punctuation">)</span><span class="token punctuation">)</span></span>
<span class="line"> </span>
<span class="line">   res <span class="token operator">=</span> df<span class="token punctuation">.</span>sort_values<span class="token punctuation">(</span><span class="token string">&#39;similarities&#39;</span><span class="token punctuation">,</span> ascending<span class="token operator">=</span><span class="token boolean">False</span><span class="token punctuation">)</span><span class="token punctuation">.</span>head<span class="token punctuation">(</span>n<span class="token punctuation">)</span></span>
<span class="line">   <span class="token keyword">return</span> res</span>
<span class="line">res <span class="token operator">=</span> search_functions<span class="token punctuation">(</span>df<span class="token punctuation">,</span> <span class="token string">&#39;Completions API tests&#39;</span><span class="token punctuation">,</span> n<span class="token operator">=</span><span class="token number">3</span><span class="token punctuation">)</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></details><details class="hint-container details"><summary>使用嵌入的推荐</summary><p><a href="https://github.com/openai/openai-cookbook/blob/main/examples/Recommendation_using_embeddings.ipynb" target="_blank" rel="noopener noreferrer">Recommendation_using_embeddings.ipynb</a></p><p>因为嵌入向量之间的距离越短表示相似度越高，嵌入可用于推荐。</p><p>下面，我们说明了一个基本的推荐系统。它接受一个字符串列表和一个“源”字符串，计算它们的嵌入，然后返回字符串的排名，从最相似到最不相似。作为一个具体示例，下面链接的笔记本将此函数的一个版本应用于<a href="http://groups.di.unipi.it/~gulli/AG_corpus_of_news_articles.html" target="_blank" rel="noopener noreferrer">AG 新闻数据集</a>（采样到 2,000 篇新闻文章描述）以返回与任何给定源文章最相似的前 5 篇文章。</p><div class="language-python line-numbers-mode" data-highlighter="prismjs" data-ext="py" data-title="py"><pre><code><span class="line"></span>
<span class="line"><span class="token keyword">def</span> <span class="token function">recommendations_from_strings</span><span class="token punctuation">(</span></span>
<span class="line">   strings<span class="token punctuation">:</span> List<span class="token punctuation">[</span><span class="token builtin">str</span><span class="token punctuation">]</span><span class="token punctuation">,</span></span>
<span class="line">   index_of_source_string<span class="token punctuation">:</span> <span class="token builtin">int</span><span class="token punctuation">,</span></span>
<span class="line">   model<span class="token operator">=</span><span class="token string">&quot;text-embedding-ada-002&quot;</span><span class="token punctuation">,</span></span>
<span class="line"><span class="token punctuation">)</span> <span class="token operator">-</span><span class="token operator">&gt;</span> List<span class="token punctuation">[</span><span class="token builtin">int</span><span class="token punctuation">]</span><span class="token punctuation">:</span></span>
<span class="line">   <span class="token triple-quoted-string string">&quot;&quot;&quot;Return nearest neighbors of a given string.&quot;&quot;&quot;</span></span>
<span class="line"></span>
<span class="line">   <span class="token comment"># get embeddings for all strings</span></span>
<span class="line">   embeddings <span class="token operator">=</span> <span class="token punctuation">[</span>embedding_from_string<span class="token punctuation">(</span>string<span class="token punctuation">,</span> model<span class="token operator">=</span>model<span class="token punctuation">)</span> <span class="token keyword">for</span> string <span class="token keyword">in</span> strings<span class="token punctuation">]</span></span>
<span class="line">   </span>
<span class="line">   <span class="token comment"># get the embedding of the source string</span></span>
<span class="line">   query_embedding <span class="token operator">=</span> embeddings<span class="token punctuation">[</span>index_of_source_string<span class="token punctuation">]</span></span>
<span class="line">   </span>
<span class="line">   <span class="token comment"># get distances between the source embedding and other embeddings (function from embeddings_utils.py)</span></span>
<span class="line">   distances <span class="token operator">=</span> distances_from_embeddings<span class="token punctuation">(</span>query_embedding<span class="token punctuation">,</span> embeddings<span class="token punctuation">,</span> distance_metric<span class="token operator">=</span><span class="token string">&quot;cosine&quot;</span><span class="token punctuation">)</span></span>
<span class="line">   </span>
<span class="line">   <span class="token comment"># get indices of nearest neighbors (function from embeddings_utils.py)</span></span>
<span class="line">   indices_of_nearest_neighbors <span class="token operator">=</span> indices_of_nearest_neighbors_from_distances<span class="token punctuation">(</span>distances<span class="token punctuation">)</span></span>
<span class="line">   <span class="token keyword">return</span> indices_of_nearest_neighbors</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></details><h2 id="局限性和风险" tabindex="-1"><a class="header-anchor" href="#局限性和风险"><span>局限性和风险</span></a></h2><p>我们的嵌入模型可能不可靠或在某些情况下会带来社会风险，并且在没有缓解措施的情况下可能会造成伤害。</p><h3 id="社会偏见" tabindex="-1"><a class="header-anchor" href="#社会偏见"><span>社会偏见</span></a></h3><!----><p>我们通过运行 SEAT（<a href="https://arxiv.org/abs/1903.10561" target="_blank" rel="noopener noreferrer">May 等人，2019 年</a>）和 Winogender（Rudinger<a href="https://arxiv.org/abs/1804.09301" target="_blank" rel="noopener noreferrer">等人，2018 年</a>）基准测试发现了模型中存在偏差的证据。这些基准一起包含 7 个测试，用于衡量模型在应用于性别名称、区域名称和某些刻板印象时是否包含隐性偏见。</p><p>例如，我们发现，与非裔美国人的名字相比，我们的模型更强烈地将 (a) 欧裔美国人的名字与积极情绪联系起来，以及 (b) 对黑人女性的负面刻板印象。</p><p>这些基准在几个方面存在局限性：(a) 它们可能无法推广到您的特定用例，以及 (b) 它们仅测试极小部分可能的社会偏见。</p><p><strong>这些测试是初步的，我们建议针对您的特定用例运行测试</strong>。这些结果应被视为该现象存在的证据，而不是对您的用例的明确描述。请参阅我们的<a href="/start/%E4%BD%BF%E7%94%A8%E6%94%BF%E7%AD%96">使用政策</a>以获取更多详细信息和指导。</p><p>如果您有任何问题，请<a href="https://help.openai.com/en/" target="_blank" rel="noopener noreferrer">通过聊天联系我们的支持团队；</a>我们很乐意就此提供建议。</p><p><a href="https://platform.openai.com/docs/guides/embeddings/blindness-to-recent-events" target="_blank" rel="noopener noreferrer">对最近发生的事件视而不见</a></p><!----><p>我们的模型在包含 8/2020 之前真实世界事件的一些信息的数据集上进行训练。如果你依赖于代表最近事件的模型，那么它们可能表现不佳。</p><h3 id="经常问的问题" tabindex="-1"><a class="header-anchor" href="#经常问的问题"><span>经常问的问题</span></a></h3><h4 id="在嵌入字符串之前-如何知道它有多少个标记" tabindex="-1"><a class="header-anchor" href="#在嵌入字符串之前-如何知道它有多少个标记"><span>在嵌入字符串之前，如何知道它有多少个标记？</span></a></h4><p>在 Python 中，您可以使用 OpenAI 的标记器将字符串拆分为标记<a href="https://github.com/openai/tiktoken" target="_blank" rel="noopener noreferrer"><code>tiktoken</code></a>。</p><p>示例代码：</p><div class="language-python line-numbers-mode" data-highlighter="prismjs" data-ext="py" data-title="py"><pre><code><span class="line"><span class="token keyword">import</span> tiktoken</span>
<span class="line"></span>
<span class="line"><span class="token keyword">def</span> <span class="token function">num_tokens_from_string</span><span class="token punctuation">(</span>string<span class="token punctuation">:</span> <span class="token builtin">str</span><span class="token punctuation">,</span> encoding_name<span class="token punctuation">:</span> <span class="token builtin">str</span><span class="token punctuation">)</span> <span class="token operator">-</span><span class="token operator">&gt;</span> <span class="token builtin">int</span><span class="token punctuation">:</span></span>
<span class="line">    <span class="token triple-quoted-string string">&quot;&quot;&quot;Returns the number of tokens in a text string.&quot;&quot;&quot;</span></span>
<span class="line">    encoding <span class="token operator">=</span> tiktoken<span class="token punctuation">.</span>get_encoding<span class="token punctuation">(</span>encoding_name<span class="token punctuation">)</span></span>
<span class="line">    num_tokens <span class="token operator">=</span> <span class="token builtin">len</span><span class="token punctuation">(</span>encoding<span class="token punctuation">.</span>encode<span class="token punctuation">(</span>string<span class="token punctuation">)</span><span class="token punctuation">)</span></span>
<span class="line">    <span class="token keyword">return</span> num_tokens</span>
<span class="line"></span>
<span class="line">num_tokens_from_string<span class="token punctuation">(</span><span class="token string">&quot;tiktoken is great!&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;cl100k_base&quot;</span><span class="token punctuation">)</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>对于像 的第二代嵌入模型<code>text-embedding-ada-002</code>，请使用<code>cl100k_base</code>编码。</p><p>更多详细信息和示例代码在 OpenAI Cookbook 指南<a href="https://github.com/openai/openai-cookbook/blob/main/examples/How_to_count_tokens_with_tiktoken.ipynb" target="_blank" rel="noopener noreferrer">how to count tokens with tiktoken</a>中。</p><h4 id="如何快速检索-k-个最近的嵌入向量" tabindex="-1"><a class="header-anchor" href="#如何快速检索-k-个最近的嵌入向量"><span>如何快速检索 K 个最近的嵌入向量？</span></a></h4><p>为了快速搜索多个矢量，我们建议使用矢量数据库。您可以在 GitHub 上的<a href="https://github.com/openai/openai-cookbook/tree/main/examples/vector_databases" target="_blank" rel="noopener noreferrer"> Cookbook</a>中找到使用矢量数据库和 OpenAI API 的示例。</p><p>矢量数据库选项包括：</p><ul><li><a href="https://www.pinecone.io/" target="_blank" rel="noopener noreferrer">Pinecone</a>，一个完全托管的矢量数据库</li><li><a href="https://weaviate.io/" target="_blank" rel="noopener noreferrer">Weaviate</a>，一个开源矢量搜索引擎</li><li><a href="https://engineering.fb.com/2017/03/29/data-infrastructure/faiss-a-library-for-efficient-similarity-search/" target="_blank" rel="noopener noreferrer">Faiss</a> , Facebook 的矢量搜索算法</li><li><a href="https://redis.com/blog/rediscover-redis-for-vector-similarity-search/" target="_blank" rel="noopener noreferrer">Redis</a>作为矢量数据库</li><li><a href="https://qdrant.tech/" target="_blank" rel="noopener noreferrer">Qdrant</a>，一个矢量搜索引擎</li><li><a href="https://typesense.org/docs/0.24.0/api/vector-search.html" target="_blank" rel="noopener noreferrer">Typesense</a>，开源搜索引擎，带有矢量搜索</li></ul><h4 id="我应该使用哪个距离函数" tabindex="-1"><a class="header-anchor" href="#我应该使用哪个距离函数"><span>我应该使用哪个距离函数？</span></a></h4><p>我们推荐<a href="https://en.wikipedia.org/wiki/Cosine_similarity" target="_blank" rel="noopener noreferrer">余弦相似度</a>。距离函数的选择通常无关紧要。</p><p>OpenAI 嵌入被归一化为长度 1，这意味着：</p><ul><li>仅使用点积可以稍微更快地计算余弦相似度</li><li>余弦相似度和欧几里德距离将导致相同的排名</li></ul></div><!--[--><!--]--></div><footer class="vp-page-meta"><!----><div class="vp-meta-item git-info"><!----><!----></div></footer><!----><!--[--><!--]--></main><!--]--></div><!--[--><!----><!--]--><!--]--></div>
    <script type="module" src="/assets/app-DtITwm2S.js" defer></script>
  </body>
</html>
