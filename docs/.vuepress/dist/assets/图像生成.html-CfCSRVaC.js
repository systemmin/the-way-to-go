import{_ as o,c,b as s,f as a,d as e,a as t,e as r,r as p,o as u}from"./app-DtITwm2S.js";const d={},k={id:"图像生成",tabindex:"-1"},m={class:"header-anchor",href:"#图像生成"};function g(v,n){const l=p("Badge"),i=p("RouteLink");return u(),c("div",null,[s("h1",k,[s("a",m,[s("span",null,[n[0]||(n[0]=s("a",{href:"https://platform.openai.com/docs/guides/images",target:"_blank",rel:"noopener noreferrer"},"图像生成",-1)),n[1]||(n[1]=a()),e(l,{text:"beta"})])])]),n[6]||(n[6]=t('<p>了解如何使用我们的DALL·E模型生成或操作图像</p><h2 id="介绍" tabindex="-1"><a class="header-anchor" href="#介绍"><span>介绍</span></a></h2><p>图片 API 提供了三种与图片交互的方法：</p><ol><li>根据文本提示从头开始创建图像</li><li>根据新文本提示创建现有图像的编辑</li><li>创建现有图像的变体</li></ol><p>本指南涵盖了使用这三个 API 端点的基础知识以及有用的代码示例。要查看它们的实际效果，请查看我们的<a href="https://labs.openai.com/" target="_blank" rel="noopener noreferrer">DALL·E 预览应用程序</a>。</p><div class="hint-container tip"><p class="hint-container-title">提示</p><p>图片 API 处于测试阶段。在此期间，API 和模型将根据您的反馈进行改进。为确保所有用户都能轻松制作原型，默认速率限制为每分钟 50 张图像。如果您想提高速率限制，请查看这篇<a href="https://help.openai.com/en/articles/6696591" target="_blank" rel="noopener noreferrer">帮助中心文章</a>。随着我们对使用和容量要求的更多了解，我们将提高默认速率限制。</p></div><h2 id="用法" tabindex="-1"><a class="header-anchor" href="#用法"><span>用法</span></a></h2><h3 id="生成" tabindex="-1"><a class="header-anchor" href="#生成"><span>生成</span></a></h3>',8)),s("p",null,[e(i,{to:"/api/%E5%9B%BE%E5%83%8F.html#%E5%88%9B%E5%BB%BA"},{default:r(()=>n[2]||(n[2]=[a("图像生成")])),_:1}),n[3]||(n[3]=a("端点允许您在给定文本提示的情况下创建原始图像。生成的图像的大小可以为 256x256、512x512 或 1024x1024 像素。较小的尺寸生成速度更快。您可以使用")),n[4]||(n[4]=s("a",{href:"https://platform.openai.com/docs/api-reference/images/create#images/create-n",target:"_blank",rel:"noopener noreferrer"},"n",-1)),n[5]||(n[5]=a("参数一次请求 1-10 张图像。"))]),n[7]||(n[7]=t(`<div class="language-python line-numbers-mode" data-highlighter="prismjs" data-ext="py" data-title="py"><pre><code><span class="line">response <span class="token operator">=</span> openai<span class="token punctuation">.</span>Image<span class="token punctuation">.</span>create<span class="token punctuation">(</span></span>
<span class="line">  prompt<span class="token operator">=</span><span class="token string">&quot;a white siamese cat&quot;</span><span class="token punctuation">,</span></span>
<span class="line">  n<span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">,</span></span>
<span class="line">  size<span class="token operator">=</span><span class="token string">&quot;1024x1024&quot;</span></span>
<span class="line"><span class="token punctuation">)</span></span>
<span class="line">image_url <span class="token operator">=</span> response<span class="token punctuation">[</span><span class="token string">&#39;data&#39;</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token string">&#39;url&#39;</span><span class="token punctuation">]</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>描述越详细，您就越有可能获得您或您的最终用户想要的结果。您可以探索<a href="https://labs.openai.com/" target="_blank" rel="noopener noreferrer">DALL·E 预览应用程序</a>中的示例以获得更多提示灵感。这是一个简单的例子：</p><table><thead><tr><th style="text-align:left;">提示</th><th style="text-align:left;">生成</th></tr></thead><tbody><tr><td style="text-align:left;">一只白色的暹罗猫</td><td style="text-align:left;"><img src="https://cdn.openai.com/API/images/guides/image_generation_simple.webp" alt="img" style="zoom:25%;"></td></tr><tr><td style="text-align:left;">一只白色暹罗猫的特写工作室摄影肖像，它看起来好奇，背光的耳朵</td><td style="text-align:left;"><img src="https://cdn.openai.com/API/images/guides/image_generation_detailed.webp" alt="img" style="zoom:25%;"></td></tr></tbody></table><p>使用<a href="https://platform.openai.com/docs/api-reference/images/create#images/create-response_format" target="_blank" rel="noopener noreferrer">response_format</a>参数，每个图像都可以作为 URL 或 Base64 数据返回。网址将在一小时后过期。</p><h3 id="编辑" tabindex="-1"><a class="header-anchor" href="#编辑"><span>编辑</span></a></h3><p><a href="https://platform.openai.com/docs/api-reference/images/create-edit" target="_blank" rel="noopener noreferrer">图像编辑</a>端点允许您通过上传蒙版来编辑和扩展图像。遮罩的透明区域指示应编辑图像的位置，提示应描述完整的新图像，<strong>而不仅仅是擦除区域</strong>。此端点可以启用类似<a href="https://labs.openai.com/editor" target="_blank" rel="noopener noreferrer">我们 DALL·E 预览应用程序中的编辑器的</a>体验。</p><div class="language-python line-numbers-mode" data-highlighter="prismjs" data-ext="py" data-title="py"><pre><code><span class="line">response <span class="token operator">=</span> openai<span class="token punctuation">.</span>Image<span class="token punctuation">.</span>create_edit<span class="token punctuation">(</span></span>
<span class="line">  image<span class="token operator">=</span><span class="token builtin">open</span><span class="token punctuation">(</span><span class="token string">&quot;sunlit_lounge.png&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;rb&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span></span>
<span class="line">  mask<span class="token operator">=</span><span class="token builtin">open</span><span class="token punctuation">(</span><span class="token string">&quot;mask.png&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;rb&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span></span>
<span class="line">  prompt<span class="token operator">=</span><span class="token string">&quot;阳光充足的室内休息区，泳池内有一只火烈鸟&quot;</span><span class="token punctuation">,</span></span>
<span class="line">  n<span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">,</span></span>
<span class="line">  size<span class="token operator">=</span><span class="token string">&quot;1024x1024&quot;</span></span>
<span class="line"><span class="token punctuation">)</span></span>
<span class="line">image_url <span class="token operator">=</span> response<span class="token punctuation">[</span><span class="token string">&#39;data&#39;</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token string">&#39;url&#39;</span><span class="token punctuation">]</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><table><thead><tr><th style="text-align:left;">图像</th><th style="text-align:left;">遮罩</th><th style="text-align:left;">输出</th></tr></thead><tbody><tr><td style="text-align:left;"><img src="https://cdn.openai.com/API/images/guides/image_edit_original.webp" alt="img" style="zoom:25%;"></td><td style="text-align:left;"><img src="https://cdn.openai.com/API/images/guides/image_edit_mask.webp" alt="img" style="zoom:25%;"></td><td style="text-align:left;"><img src="https://cdn.openai.com/API/images/guides/image_edit_output.webp" alt="img" style="zoom:25%;"></td></tr></tbody></table><p>提示：一个阳光充足的室内休息区，带有一个包含火烈鸟的游泳池</p><p>上传的图片和遮罩必须是小于 4MB 的正方形 PNG 图片，并且必须具有相同的尺寸。生成输出时不使用遮罩的非透明区域，因此它们不一定需要像上面的示例那样与原始图像匹配。</p><h3 id="变体" tabindex="-1"><a class="header-anchor" href="#变体"><span>变体</span></a></h3><p><a href="https://platform.openai.com/docs/api-reference/images/create-variation" target="_blank" rel="noopener noreferrer">图像变体</a>端点允许您生成给定图像的变体。</p><p>生成图像变体</p><div class="language-python line-numbers-mode" data-highlighter="prismjs" data-ext="py" data-title="py"><pre><code><span class="line">response <span class="token operator">=</span> openai<span class="token punctuation">.</span>Image<span class="token punctuation">.</span>create_variation<span class="token punctuation">(</span></span>
<span class="line">  image<span class="token operator">=</span><span class="token builtin">open</span><span class="token punctuation">(</span><span class="token string">&quot;corgi_and_cat_paw.png&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;rb&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span></span>
<span class="line">  n<span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">,</span></span>
<span class="line">  size<span class="token operator">=</span><span class="token string">&quot;1024x1024&quot;</span></span>
<span class="line"><span class="token punctuation">)</span></span>
<span class="line">image_url <span class="token operator">=</span> response<span class="token punctuation">[</span><span class="token string">&#39;data&#39;</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token string">&#39;url&#39;</span><span class="token punctuation">]</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><table><thead><tr><th style="text-align:left;">图像</th><th style="text-align:left;">输出</th></tr></thead><tbody><tr><td style="text-align:left;"><img src="https://cdn.openai.com/API/images/guides/image_variation_original.webp" alt="img" style="zoom:25%;"></td><td style="text-align:left;"><img src="https://cdn.openai.com/API/images/guides/image_variation_output.webp" alt="img" style="zoom:25%;"></td></tr></tbody></table><p>与编辑端点类似，输入图像必须是大小小于 4MB 的方形 PNG 图像。</p><h3 id="内容审核" tabindex="-1"><a class="header-anchor" href="#内容审核"><span>内容审核</span></a></h3><p>提示和图像根据我们的<a href="https://labs.openai.com/policies/content-policy" target="_blank" rel="noopener noreferrer">内容政策</a>进行过滤，当提示或图像被标记时返回错误。如果您对误报或相关问题有任何反馈，请通过我们的<a href="https://help.openai.com/" target="_blank" rel="noopener noreferrer">帮助中心</a>联系我们。</p><h2 id="特定语言提示" tabindex="-1"><a class="header-anchor" href="#特定语言提示"><span>特定语言提示</span></a></h2><h3 id="使用内存图像数据" tabindex="-1"><a class="header-anchor" href="#使用内存图像数据"><span>使用内存图像数据</span></a></h3><p>上面指南中的 Python 示例使用该<code>open</code>函数从磁盘读取图像数据。在某些情况下，您可能会将图像数据保存在内存中。<code>BytesIO</code>下面是一个使用存储在对象中的图像数据的 API 调用示例：</p><div class="language-python line-numbers-mode" data-highlighter="prismjs" data-ext="py" data-title="py"><pre><code><span class="line"><span class="token keyword">from</span> io <span class="token keyword">import</span> BytesIO</span>
<span class="line"></span>
<span class="line"><span class="token comment"># This is the BytesIO object that contains your image data</span></span>
<span class="line">byte_stream<span class="token punctuation">:</span> BytesIO <span class="token operator">=</span> <span class="token punctuation">[</span>your image data<span class="token punctuation">]</span></span>
<span class="line">byte_array <span class="token operator">=</span> byte_stream<span class="token punctuation">.</span>getvalue<span class="token punctuation">(</span><span class="token punctuation">)</span></span>
<span class="line">response <span class="token operator">=</span> openai<span class="token punctuation">.</span>Image<span class="token punctuation">.</span>create_variation<span class="token punctuation">(</span></span>
<span class="line">  image<span class="token operator">=</span>byte_array<span class="token punctuation">,</span></span>
<span class="line">  n<span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">,</span></span>
<span class="line">  size<span class="token operator">=</span><span class="token string">&quot;1024x1024&quot;</span></span>
<span class="line"><span class="token punctuation">)</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="图像数据操作" tabindex="-1"><a class="header-anchor" href="#图像数据操作"><span>图像数据操作</span></a></h3><p>在将图像传递给 API 之前对图像执行操作可能很有用。<code>PIL</code>这是一个用于调整图像大小的示例：</p><div class="language-python line-numbers-mode" data-highlighter="prismjs" data-ext="py" data-title="py"><pre><code><span class="line"><span class="token keyword">from</span> io <span class="token keyword">import</span> BytesIO</span>
<span class="line"><span class="token keyword">from</span> PIL <span class="token keyword">import</span> Image</span>
<span class="line"></span>
<span class="line"><span class="token comment"># Read the image file from disk and resize it</span></span>
<span class="line">image <span class="token operator">=</span> Image<span class="token punctuation">.</span><span class="token builtin">open</span><span class="token punctuation">(</span><span class="token string">&quot;image.png&quot;</span><span class="token punctuation">)</span></span>
<span class="line">width<span class="token punctuation">,</span> height <span class="token operator">=</span> <span class="token number">256</span><span class="token punctuation">,</span> <span class="token number">256</span></span>
<span class="line">image <span class="token operator">=</span> image<span class="token punctuation">.</span>resize<span class="token punctuation">(</span><span class="token punctuation">(</span>width<span class="token punctuation">,</span> height<span class="token punctuation">)</span><span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line"><span class="token comment"># Convert the image to a BytesIO object</span></span>
<span class="line">byte_stream <span class="token operator">=</span> BytesIO<span class="token punctuation">(</span><span class="token punctuation">)</span></span>
<span class="line">image<span class="token punctuation">.</span>save<span class="token punctuation">(</span>byte_stream<span class="token punctuation">,</span> <span class="token builtin">format</span><span class="token operator">=</span><span class="token string">&#39;PNG&#39;</span><span class="token punctuation">)</span></span>
<span class="line">byte_array <span class="token operator">=</span> byte_stream<span class="token punctuation">.</span>getvalue<span class="token punctuation">(</span><span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line">response <span class="token operator">=</span> openai<span class="token punctuation">.</span>Image<span class="token punctuation">.</span>create_variation<span class="token punctuation">(</span></span>
<span class="line">  image<span class="token operator">=</span>byte_array<span class="token punctuation">,</span></span>
<span class="line">  n<span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">,</span></span>
<span class="line">  size<span class="token operator">=</span><span class="token string">&quot;1024x1024&quot;</span></span>
<span class="line"><span class="token punctuation">)</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="错误处理" tabindex="-1"><a class="header-anchor" href="#错误处理"><span>错误处理</span></a></h3><p>API 请求可能会由于无效输入、速率限制或其他问题而返回错误。这些错误可以用一个<code>try...except</code>语句来处理，错误的详细信息可以在<code>e.error</code>：</p><div class="language-python line-numbers-mode" data-highlighter="prismjs" data-ext="py" data-title="py"><pre><code><span class="line"><span class="token keyword">try</span><span class="token punctuation">:</span></span>
<span class="line">  openai<span class="token punctuation">.</span>Image<span class="token punctuation">.</span>create_variation<span class="token punctuation">(</span></span>
<span class="line">    <span class="token builtin">open</span><span class="token punctuation">(</span><span class="token string">&quot;image.png&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;rb&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span></span>
<span class="line">    n<span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">,</span></span>
<span class="line">    size<span class="token operator">=</span><span class="token string">&quot;1024x1024&quot;</span></span>
<span class="line">  <span class="token punctuation">)</span></span>
<span class="line">  <span class="token keyword">print</span><span class="token punctuation">(</span>response<span class="token punctuation">[</span><span class="token string">&#39;data&#39;</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token string">&#39;url&#39;</span><span class="token punctuation">]</span><span class="token punctuation">)</span></span>
<span class="line"><span class="token keyword">except</span> openai<span class="token punctuation">.</span>error<span class="token punctuation">.</span>OpenAIError <span class="token keyword">as</span> e<span class="token punctuation">:</span></span>
<span class="line">  <span class="token keyword">print</span><span class="token punctuation">(</span>e<span class="token punctuation">.</span>http_status<span class="token punctuation">)</span></span>
<span class="line">  <span class="token keyword">print</span><span class="token punctuation">(</span>e<span class="token punctuation">.</span>error<span class="token punctuation">)</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div>`,28))])}const b=o(d,[["render",g],["__file","图像生成.html.vue"]]),y=JSON.parse('{"path":"/guides/%E5%9B%BE%E5%83%8F%E7%94%9F%E6%88%90.html","title":"图像生成","lang":"zh-cn","frontmatter":{},"headers":[{"level":1,"title":"图像生成","slug":"图像生成","link":"#图像生成","children":[{"level":2,"title":"介绍","slug":"介绍","link":"#介绍","children":[]},{"level":2,"title":"用法","slug":"用法","link":"#用法","children":[{"level":3,"title":"生成","slug":"生成","link":"#生成","children":[]},{"level":3,"title":"编辑","slug":"编辑","link":"#编辑","children":[]},{"level":3,"title":"变体","slug":"变体","link":"#变体","children":[]},{"level":3,"title":"内容审核","slug":"内容审核","link":"#内容审核","children":[]}]},{"level":2,"title":"特定语言提示","slug":"特定语言提示","link":"#特定语言提示","children":[{"level":3,"title":"使用内存图像数据","slug":"使用内存图像数据","link":"#使用内存图像数据","children":[]},{"level":3,"title":"图像数据操作","slug":"图像数据操作","link":"#图像数据操作","children":[]},{"level":3,"title":"错误处理","slug":"错误处理","link":"#错误处理","children":[]}]}]}],"git":{},"filePathRelative":"guides/图像生成.md"}');export{b as comp,y as data};
